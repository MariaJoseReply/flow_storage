{
  "header" : {
    "dataModelVersion" : "3"
  },
  "content" : {
    "flowSnapshot" : {
      "externalControllerServices" : { },
      "flowContents" : {
        "comments" : "{ \"version\": \"9.1.16.0\",  \"level\": \"9.1.16.0/search-registry-app=v9-20240823-1555\" }",
        "componentType" : "PROCESS_GROUP",
        "connections" : [ {
          "backPressureDataSizeThreshold" : "1 GB",
          "backPressureObjectThreshold" : 10000,
          "bends" : [ ],
          "componentType" : "CONNECTION",
          "destination" : {
            "comments" : "",
            "groupId" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "id" : "8124af46-2c84-3b0b-8cef-eb96abdc012d",
            "instanceIdentifier" : "85969088-b967-3da9-6f0e-befc14f8d10b",
            "name" : "INPUT",
            "type" : "INPUT_PORT"
          },
          "flowFileExpiration" : "0 sec",
          "groupIdentifier" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
          "identifier" : "56462a6c-4832-3c97-8d36-348d3ee1f86b",
          "instanceIdentifier" : "3958f1bc-9843-3df6-d7bc-a7d43c33f066",
          "labelIndex" : 1,
          "loadBalanceCompression" : "DO_NOT_COMPRESS",
          "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
          "name" : "",
          "partitioningAttribute" : "",
          "prioritizers" : [ ],
          "selectedRelationships" : [ "" ],
          "source" : {
            "comments" : "",
            "groupId" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
            "id" : "22326186-af10-3eed-95a4-8f1816b7d307",
            "instanceIdentifier" : "c15e2e49-77ac-3007-99ea-5226b5e51267",
            "name" : "INPUT",
            "type" : "INPUT_PORT"
          },
          "zIndex" : 0
        }, {
          "backPressureDataSizeThreshold" : "1 GB",
          "backPressureObjectThreshold" : 10000,
          "bends" : [ ],
          "componentType" : "CONNECTION",
          "destination" : {
            "comments" : "",
            "groupId" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
            "id" : "7dd6e469-ee92-35ca-85c5-03042d822f56",
            "instanceIdentifier" : "abce8c27-8eb6-3b61-77ac-b5003fb57936",
            "name" : "OUTPUT",
            "type" : "OUTPUT_PORT"
          },
          "flowFileExpiration" : "0 sec",
          "groupIdentifier" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
          "identifier" : "e1a919f2-7dfc-35bc-aa88-e5565a02cd71",
          "instanceIdentifier" : "ac39f374-85da-3c3b-a0b4-47f5e3772b4d",
          "labelIndex" : 1,
          "loadBalanceCompression" : "DO_NOT_COMPRESS",
          "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
          "name" : "",
          "partitioningAttribute" : "",
          "prioritizers" : [ ],
          "selectedRelationships" : [ "" ],
          "source" : {
            "comments" : "",
            "groupId" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "id" : "0690125f-52b7-3189-8c41-d9bd6ba2ffab",
            "instanceIdentifier" : "ce1e4c20-c271-3097-88ff-f3df6da6c788",
            "name" : "OUTPUT",
            "type" : "OUTPUT_PORT"
          },
          "zIndex" : 0
        } ],
        "controllerServices" : [ {
          "bulletinLevel" : "WARN",
          "bundle" : {
            "artifact" : "commerce-search-processors-nar",
            "group" : "com.hcl.commerce",
            "version" : "9.1.16.0"
          },
          "comments" : "",
          "componentType" : "CONTROLLER_SERVICE",
          "controllerServiceApis" : [ {
            "bundle" : {
              "artifact" : "commerce-search-processors-nar",
              "group" : "com.hcl.commerce",
              "version" : "9.1.16.0"
            },
            "type" : "com.hcl.software.data.ingest.controller.service.ProfileService"
          } ],
          "groupIdentifier" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
          "identifier" : "f85d8729-84ed-3207-8b25-ad8b515801cf",
          "instanceIdentifier" : "00ca8cee-3c40-38b2-953a-8fe016168e51",
          "name" : "Profile Controller Service",
          "properties" : {
            "Retry Limit" : "500"
          },
          "propertyDescriptors" : {
            "Retry Limit" : {
              "displayName" : "Retry Limit",
              "identifiesControllerService" : false,
              "name" : "Retry Limit",
              "sensitive" : false
            }
          },
          "scheduledState" : "DISABLED",
          "type" : "com.hcl.software.data.ingest.controller.service.ProfileControllerService"
        }, {
          "bulletinLevel" : "WARN",
          "bundle" : {
            "artifact" : "commerce-search-processors-nar",
            "group" : "com.hcl.commerce",
            "version" : "9.1.16.0"
          },
          "comments" : "",
          "componentType" : "CONTROLLER_SERVICE",
          "controllerServiceApis" : [ {
            "bundle" : {
              "artifact" : "commerce-search-processors-nar",
              "group" : "com.hcl.commerce",
              "version" : "9.1.16.0"
            },
            "type" : "com.hcl.software.data.ingest.controller.service.StoreService"
          } ],
          "groupIdentifier" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
          "identifier" : "45ab14cb-fe83-3a33-ba69-a2f1f47309d5",
          "instanceIdentifier" : "c7848447-c7d5-33ba-4dc5-4a43a62183dd",
          "name" : "Store Controller Service",
          "properties" : {
            "Retry Limit" : "500"
          },
          "propertyDescriptors" : {
            "Retry Limit" : {
              "displayName" : "Retry Limit",
              "identifiesControllerService" : false,
              "name" : "Retry Limit",
              "sensitive" : false
            }
          },
          "scheduledState" : "DISABLED",
          "type" : "com.hcl.software.data.ingest.controller.service.StoreControllerService"
        }, {
          "bulletinLevel" : "WARN",
          "bundle" : {
            "artifact" : "nifi-dbcp-service-nar",
            "group" : "org.apache.nifi",
            "version" : "1.22.0"
          },
          "comments" : "",
          "componentType" : "CONTROLLER_SERVICE",
          "controllerServiceApis" : [ {
            "bundle" : {
              "artifact" : "nifi-standard-services-api-nar",
              "group" : "org.apache.nifi",
              "version" : "1.22.0"
            },
            "type" : "org.apache.nifi.dbcp.DBCPService"
          } ],
          "groupIdentifier" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
          "identifier" : "73700914-fc73-39a7-a3aa-1eae9a03b1b6",
          "instanceIdentifier" : "10c10eff-425e-3854-068b-e3093d5adce9",
          "name" : "Database Connection Pool",
          "properties" : {
            "CURSOR_HOLDABILITY" : "1",
            "dbcp-min-idle-conns" : "0",
            "Max Wait Time" : "500 millis",
            "Database Driver Class Name" : "#{JDBC_DRIVER_CLASSNAME}",
            "dbcp-min-evictable-idle-time" : "30 mins",
            "AUTO_CASE_SCHEMA" : "true",
            "Max Total Connections" : "8",
            "IFX_ISOLATION_LEVEL" : "5U",
            "METADATA_UPPERCASE_VALUES" : "true",
            "dbcp-max-conn-lifetime" : "-1",
            "Database Connection URL" : "#{JDBC_URL}",
            "dbcp-time-between-eviction-runs" : "-1",
            "Database User" : "#{JDBC_USER_NAME}",
            "dbcp-soft-min-evictable-idle-time" : "-1",
            "database-driver-locations" : "#{JDBC_DRIVER_LOCATION}",
            "dbcp-max-idle-conns" : "8",
            "FET_BUF_SIZE" : "256000",
            "Password" : "#{JDBC_USER_PASSWORD}",
            "IFX_LOCK_MODE_WAIT" : "15"
          },
          "propertyDescriptors" : {
            "kerberos-password" : {
              "displayName" : "Kerberos Password",
              "identifiesControllerService" : false,
              "name" : "kerberos-password",
              "sensitive" : true
            },
            "CURSOR_HOLDABILITY" : {
              "displayName" : "CURSOR_HOLDABILITY",
              "identifiesControllerService" : false,
              "name" : "CURSOR_HOLDABILITY",
              "sensitive" : false
            },
            "dbcp-min-idle-conns" : {
              "displayName" : "Minimum Idle Connections",
              "identifiesControllerService" : false,
              "name" : "dbcp-min-idle-conns",
              "sensitive" : false
            },
            "Max Wait Time" : {
              "displayName" : "Max Wait Time",
              "identifiesControllerService" : false,
              "name" : "Max Wait Time",
              "sensitive" : false
            },
            "Database Driver Class Name" : {
              "displayName" : "Database Driver Class Name",
              "identifiesControllerService" : false,
              "name" : "Database Driver Class Name",
              "sensitive" : false
            },
            "dbcp-min-evictable-idle-time" : {
              "displayName" : "Minimum Evictable Idle Time",
              "identifiesControllerService" : false,
              "name" : "dbcp-min-evictable-idle-time",
              "sensitive" : false
            },
            "kerberos-principal" : {
              "displayName" : "Kerberos Principal",
              "identifiesControllerService" : false,
              "name" : "kerberos-principal",
              "sensitive" : false
            },
            "AUTO_CASE_SCHEMA" : {
              "displayName" : "AUTO_CASE_SCHEMA",
              "identifiesControllerService" : false,
              "name" : "AUTO_CASE_SCHEMA",
              "sensitive" : false
            },
            "Max Total Connections" : {
              "displayName" : "Max Total Connections",
              "identifiesControllerService" : false,
              "name" : "Max Total Connections",
              "sensitive" : false
            },
            "IFX_ISOLATION_LEVEL" : {
              "displayName" : "IFX_ISOLATION_LEVEL",
              "identifiesControllerService" : false,
              "name" : "IFX_ISOLATION_LEVEL",
              "sensitive" : false
            },
            "METADATA_UPPERCASE_VALUES" : {
              "displayName" : "METADATA_UPPERCASE_VALUES",
              "identifiesControllerService" : false,
              "name" : "METADATA_UPPERCASE_VALUES",
              "sensitive" : false
            },
            "kerberos-credentials-service" : {
              "displayName" : "Kerberos Credentials Service",
              "identifiesControllerService" : true,
              "name" : "kerberos-credentials-service",
              "sensitive" : false
            },
            "dbcp-max-conn-lifetime" : {
              "displayName" : "Max Connection Lifetime",
              "identifiesControllerService" : false,
              "name" : "dbcp-max-conn-lifetime",
              "sensitive" : false
            },
            "Validation-query" : {
              "displayName" : "Validation query",
              "identifiesControllerService" : false,
              "name" : "Validation-query",
              "sensitive" : false
            },
            "Database Connection URL" : {
              "displayName" : "Database Connection URL",
              "identifiesControllerService" : false,
              "name" : "Database Connection URL",
              "sensitive" : false
            },
            "dbcp-time-between-eviction-runs" : {
              "displayName" : "Time Between Eviction Runs",
              "identifiesControllerService" : false,
              "name" : "dbcp-time-between-eviction-runs",
              "sensitive" : false
            },
            "Database User" : {
              "displayName" : "Database User",
              "identifiesControllerService" : false,
              "name" : "Database User",
              "sensitive" : false
            },
            "kerberos-user-service" : {
              "displayName" : "Kerberos User Service",
              "identifiesControllerService" : true,
              "name" : "kerberos-user-service",
              "sensitive" : false
            },
            "dbcp-soft-min-evictable-idle-time" : {
              "displayName" : "Soft Minimum Evictable Idle Time",
              "identifiesControllerService" : false,
              "name" : "dbcp-soft-min-evictable-idle-time",
              "sensitive" : false
            },
            "database-driver-locations" : {
              "displayName" : "Database Driver Location(s)",
              "identifiesControllerService" : false,
              "name" : "database-driver-locations",
              "resourceDefinition" : {
                "cardinality" : "MULTIPLE",
                "resourceTypes" : [ "FILE", "DIRECTORY", "URL" ]
              },
              "sensitive" : false
            },
            "dbcp-max-idle-conns" : {
              "displayName" : "Max Idle Connections",
              "identifiesControllerService" : false,
              "name" : "dbcp-max-idle-conns",
              "sensitive" : false
            },
            "FET_BUF_SIZE" : {
              "displayName" : "FET_BUF_SIZE",
              "identifiesControllerService" : false,
              "name" : "FET_BUF_SIZE",
              "sensitive" : false
            },
            "Password" : {
              "displayName" : "Password",
              "identifiesControllerService" : false,
              "name" : "Password",
              "sensitive" : true
            },
            "IFX_LOCK_MODE_WAIT" : {
              "displayName" : "IFX_LOCK_MODE_WAIT",
              "identifiesControllerService" : false,
              "name" : "IFX_LOCK_MODE_WAIT",
              "sensitive" : false
            }
          },
          "scheduledState" : "DISABLED",
          "type" : "org.apache.nifi.dbcp.DBCPConnectionPool"
        } ],
        "defaultBackPressureDataSizeThreshold" : "1 GB",
        "defaultBackPressureObjectThreshold" : 10000,
        "defaultFlowFileExpiration" : "0 sec",
        "flowFileConcurrency" : "UNBOUNDED",
        "flowFileOutboundPolicy" : "STREAM_WHEN_AVAILABLE",
        "funnels" : [ ],
        "identifier" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
        "inputPorts" : [ {
          "allowRemoteAccess" : false,
          "comments" : "",
          "componentType" : "INPUT_PORT",
          "concurrentlySchedulableTaskCount" : 1,
          "groupIdentifier" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
          "identifier" : "22326186-af10-3eed-95a4-8f1816b7d307",
          "instanceIdentifier" : "c15e2e49-77ac-3007-99ea-5226b5e51267",
          "name" : "INPUT",
          "position" : {
            "x" : 512.0,
            "y" : 728.0
          },
          "scheduledState" : "ENABLED",
          "type" : "INPUT_PORT"
        } ],
        "instanceIdentifier" : "ccad162f-018a-1000-f3eb-1de4706d776c",
        "labels" : [ {
          "componentType" : "LABEL",
          "groupIdentifier" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
          "height" : 312.0,
          "identifier" : "f378b682-79d6-30c2-b2b6-46397ce138e1",
          "instanceIdentifier" : "7cb5d86d-7cd0-39f7-8c97-aa93e0e86bf1",
          "label" : "Category - Stage 1b (Database)",
          "position" : {
            "x" : 368.0,
            "y" : 928.0
          },
          "style" : {
            "background-color" : "#d4ffe7",
            "font-size" : "24px"
          },
          "width" : 528.0,
          "zIndex" : 0
        } ],
        "name" : "Category Stage 1b (Find Facets)",
        "outputPorts" : [ {
          "allowRemoteAccess" : false,
          "comments" : "",
          "componentType" : "OUTPUT_PORT",
          "concurrentlySchedulableTaskCount" : 1,
          "groupIdentifier" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
          "identifier" : "7dd6e469-ee92-35ca-85c5-03042d822f56",
          "instanceIdentifier" : "abce8c27-8eb6-3b61-77ac-b5003fb57936",
          "name" : "OUTPUT",
          "position" : {
            "x" : 512.0,
            "y" : 1376.0
          },
          "scheduledState" : "ENABLED",
          "type" : "OUTPUT_PORT"
        } ],
        "parameterContextName" : "AUTH_JDBC_CONTEXT",
        "position" : {
          "x" : 10336.0,
          "y" : 5296.0
        },
        "processGroups" : [ {
          "comments" : "",
          "componentType" : "PROCESS_GROUP",
          "connections" : [ {
            "backPressureDataSizeThreshold" : "1 GB",
            "backPressureObjectThreshold" : 10000,
            "bends" : [ ],
            "componentType" : "CONNECTION",
            "destination" : {
              "comments" : "",
              "groupId" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
              "id" : "37da98ad-5827-3ca9-bced-19dde329bf05",
              "instanceIdentifier" : "39da88f5-6319-39ff-408b-4e772b630828",
              "name" : "Funnel",
              "type" : "FUNNEL"
            },
            "flowFileExpiration" : "0 sec",
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "1ff7ea1b-1355-3797-a18d-a840e7940aa4",
            "instanceIdentifier" : "f003b934-680d-3118-ea02-1dfea3e65495",
            "labelIndex" : 1,
            "loadBalanceCompression" : "DO_NOT_COMPRESS",
            "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
            "name" : "",
            "partitioningAttribute" : "",
            "prioritizers" : [ ],
            "selectedRelationships" : [ "" ],
            "source" : {
              "comments" : "",
              "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "id" : "b20dcc17-0d6b-35b8-a896-cae9dbc04480",
              "instanceIdentifier" : "b9cf7fc4-936d-38b9-3875-646506b0ad1d",
              "name" : "SUCCESS",
              "type" : "OUTPUT_PORT"
            },
            "zIndex" : 0
          }, {
            "backPressureDataSizeThreshold" : "1 GB",
            "backPressureObjectThreshold" : 10000,
            "bends" : [ ],
            "componentType" : "CONNECTION",
            "destination" : {
              "comments" : "",
              "groupId" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
              "id" : "0690125f-52b7-3189-8c41-d9bd6ba2ffab",
              "instanceIdentifier" : "ce1e4c20-c271-3097-88ff-f3df6da6c788",
              "name" : "OUTPUT",
              "type" : "OUTPUT_PORT"
            },
            "flowFileExpiration" : "0 sec",
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "9ad60429-543b-350e-aa96-b6e859909f81",
            "instanceIdentifier" : "200c7c86-5674-3042-f6bd-7cb4b19399b8",
            "labelIndex" : 1,
            "loadBalanceCompression" : "DO_NOT_COMPRESS",
            "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
            "name" : "",
            "partitioningAttribute" : "",
            "prioritizers" : [ ],
            "selectedRelationships" : [ "" ],
            "source" : {
              "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "id" : "3450fa48-474f-351f-8d31-c2ae097426f2",
              "instanceIdentifier" : "fcb8d11d-ae44-38f2-2b92-fc4a0784b30b",
              "name" : "NEXT",
              "type" : "OUTPUT_PORT"
            },
            "zIndex" : 0
          }, {
            "backPressureDataSizeThreshold" : "1 GB",
            "backPressureObjectThreshold" : 10000,
            "bends" : [ ],
            "componentType" : "CONNECTION",
            "destination" : {
              "comments" : "",
              "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "id" : "4d924c33-7371-35c0-ab9f-469a1d7bd52d",
              "instanceIdentifier" : "d25755a8-146e-3543-3b80-c1543883b487",
              "name" : "INPUT",
              "type" : "INPUT_PORT"
            },
            "flowFileExpiration" : "0 sec",
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "5334d564-a60b-301f-99a0-74dae294340a",
            "instanceIdentifier" : "e0f8f45e-2314-3528-506f-6d13218fc26a",
            "labelIndex" : 1,
            "loadBalanceCompression" : "DO_NOT_COMPRESS",
            "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
            "name" : "",
            "partitioningAttribute" : "",
            "prioritizers" : [ ],
            "selectedRelationships" : [ "" ],
            "source" : {
              "comments" : "",
              "groupId" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
              "id" : "8124af46-2c84-3b0b-8cef-eb96abdc012d",
              "instanceIdentifier" : "85969088-b967-3da9-6f0e-befc14f8d10b",
              "name" : "INPUT",
              "type" : "INPUT_PORT"
            },
            "zIndex" : 0
          }, {
            "backPressureDataSizeThreshold" : "1 GB",
            "backPressureObjectThreshold" : 10000,
            "bends" : [ ],
            "componentType" : "CONNECTION",
            "destination" : {
              "comments" : "",
              "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "id" : "a8b09196-ff57-3afc-be7c-6cbd7aa26b56",
              "instanceIdentifier" : "fb2f18a2-5fed-3b45-fad6-8d5ab3523c33",
              "name" : "INPUT",
              "type" : "INPUT_PORT"
            },
            "flowFileExpiration" : "0 sec",
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "43426e70-064c-33c9-bf23-659290e00a30",
            "instanceIdentifier" : "741989c7-b2f3-324d-44ea-c3190cea97df",
            "labelIndex" : 1,
            "loadBalanceCompression" : "DO_NOT_COMPRESS",
            "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
            "name" : "",
            "partitioningAttribute" : "",
            "prioritizers" : [ ],
            "selectedRelationships" : [ "" ],
            "source" : {
              "comments" : "",
              "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "id" : "a92e92e9-273e-3a03-a5e0-b63e9d3ed0c2",
              "instanceIdentifier" : "494b0919-e971-3384-cdef-ddbc5622a3fa",
              "name" : "OUTPUT",
              "type" : "OUTPUT_PORT"
            },
            "zIndex" : 0
          }, {
            "backPressureDataSizeThreshold" : "1 GB",
            "backPressureObjectThreshold" : 10000,
            "bends" : [ ],
            "componentType" : "CONNECTION",
            "destination" : {
              "comments" : "",
              "groupId" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
              "id" : "0690125f-52b7-3189-8c41-d9bd6ba2ffab",
              "instanceIdentifier" : "ce1e4c20-c271-3097-88ff-f3df6da6c788",
              "name" : "OUTPUT",
              "type" : "OUTPUT_PORT"
            },
            "flowFileExpiration" : "0 sec",
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "ea647591-dbd2-3120-a5d3-9c045ddc8e9f",
            "instanceIdentifier" : "4f0016e7-f7d8-3c2c-55e0-0bbc9323f919",
            "labelIndex" : 1,
            "loadBalanceCompression" : "DO_NOT_COMPRESS",
            "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
            "name" : "",
            "partitioningAttribute" : "",
            "prioritizers" : [ ],
            "selectedRelationships" : [ "" ],
            "source" : {
              "comments" : "",
              "groupId" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
              "id" : "37da98ad-5827-3ca9-bced-19dde329bf05",
              "instanceIdentifier" : "39da88f5-6319-39ff-408b-4e772b630828",
              "name" : "Funnel",
              "type" : "FUNNEL"
            },
            "zIndex" : 0
          }, {
            "backPressureDataSizeThreshold" : "1 GB",
            "backPressureObjectThreshold" : 10000,
            "bends" : [ {
              "x" : 3776.0,
              "y" : 600.0
            } ],
            "componentType" : "CONNECTION",
            "destination" : {
              "comments" : "",
              "groupId" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
              "id" : "0690125f-52b7-3189-8c41-d9bd6ba2ffab",
              "instanceIdentifier" : "ce1e4c20-c271-3097-88ff-f3df6da6c788",
              "name" : "OUTPUT",
              "type" : "OUTPUT_PORT"
            },
            "flowFileExpiration" : "0 sec",
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "c2cd3bbe-e8d2-3ccb-bdef-eeb9b196e403",
            "instanceIdentifier" : "7c764520-e105-3496-5d02-cc8e4caeb67a",
            "labelIndex" : 1,
            "loadBalanceCompression" : "DO_NOT_COMPRESS",
            "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
            "name" : "",
            "partitioningAttribute" : "",
            "prioritizers" : [ ],
            "selectedRelationships" : [ "" ],
            "source" : {
              "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "id" : "a9da508c-c399-3bcb-93c4-7b4c4d97023a",
              "instanceIdentifier" : "4a0cc3c8-970c-3183-30bd-d7c9289fd830",
              "name" : "SKIP",
              "type" : "OUTPUT_PORT"
            },
            "zIndex" : 0
          }, {
            "backPressureDataSizeThreshold" : "1 GB",
            "backPressureObjectThreshold" : 10000,
            "bends" : [ ],
            "componentType" : "CONNECTION",
            "destination" : {
              "groupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "id" : "1ad48f2d-bb6b-3556-9324-b7ac549ef728",
              "instanceIdentifier" : "792da027-d7c8-309e-43c2-9701ffa7790a",
              "name" : "Logger INPUT",
              "type" : "REMOTE_INPUT_PORT"
            },
            "flowFileExpiration" : "0 sec",
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "ca9e3da7-b9c7-3838-bffe-cfa240c21fa8",
            "instanceIdentifier" : "6dedcb71-4681-3fa6-f369-d21584471c9b",
            "labelIndex" : 1,
            "loadBalanceCompression" : "DO_NOT_COMPRESS",
            "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
            "name" : "",
            "partitioningAttribute" : "",
            "prioritizers" : [ ],
            "selectedRelationships" : [ "" ],
            "source" : {
              "comments" : "",
              "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "id" : "df254618-149b-32f7-8838-1d36fecee3b9",
              "instanceIdentifier" : "3d8bb61a-1c3d-34cc-6532-b679291969d7",
              "name" : "ERROR",
              "type" : "OUTPUT_PORT"
            },
            "zIndex" : 0
          } ],
          "controllerServices" : [ ],
          "defaultBackPressureDataSizeThreshold" : "1 GB",
          "defaultBackPressureObjectThreshold" : 10000,
          "defaultFlowFileExpiration" : "0 sec",
          "flowFileConcurrency" : "UNBOUNDED",
          "flowFileOutboundPolicy" : "STREAM_WHEN_AVAILABLE",
          "funnels" : [ {
            "componentType" : "FUNNEL",
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "37da98ad-5827-3ca9-bced-19dde329bf05",
            "instanceIdentifier" : "39da88f5-6319-39ff-408b-4e772b630828",
            "position" : {
              "x" : 2712.0,
              "y" : 656.0
            }
          } ],
          "groupIdentifier" : "5f29e5ae-6580-3b5f-92bc-86fce7d366d9",
          "identifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
          "inputPorts" : [ {
            "allowRemoteAccess" : false,
            "comments" : "",
            "componentType" : "INPUT_PORT",
            "concurrentlySchedulableTaskCount" : 1,
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "8124af46-2c84-3b0b-8cef-eb96abdc012d",
            "instanceIdentifier" : "85969088-b967-3da9-6f0e-befc14f8d10b",
            "name" : "INPUT",
            "position" : {
              "x" : 3304.0,
              "y" : 144.0
            },
            "scheduledState" : "ENABLED",
            "type" : "INPUT_PORT"
          } ],
          "instanceIdentifier" : "ae23f837-7576-37f3-65c8-ecc5e05e167e",
          "labels" : [ {
            "componentType" : "LABEL",
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "height" : 760.0,
            "identifier" : "4b099509-9aa5-3a7f-9569-275b6aabaf86",
            "instanceIdentifier" : "740f08ca-ea77-3e84-8674-6039ae5d141b",
            "label" : "Find Facets for Category",
            "position" : {
              "x" : 2400.0,
              "y" : -32.0
            },
            "style" : {
              "background-color" : "#d4ffe7",
              "font-size" : "24px"
            },
            "width" : 1312.0,
            "zIndex" : 0
          } ],
          "name" : "Find Facets for Category",
          "outputPorts" : [ {
            "allowRemoteAccess" : false,
            "comments" : "",
            "componentType" : "OUTPUT_PORT",
            "concurrentlySchedulableTaskCount" : 1,
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "0690125f-52b7-3189-8c41-d9bd6ba2ffab",
            "instanceIdentifier" : "ce1e4c20-c271-3097-88ff-f3df6da6c788",
            "name" : "OUTPUT",
            "position" : {
              "x" : 3304.0,
              "y" : 656.0
            },
            "scheduledState" : "ENABLED",
            "type" : "OUTPUT_PORT"
          } ],
          "position" : {
            "x" : 440.0,
            "y" : 1000.0
          },
          "processGroups" : [ {
            "comments" : "",
            "componentType" : "PROCESS_GROUP",
            "connections" : [ {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "ba2fefe8-f406-3fac-a49f-e58c69fb645f",
                "instanceIdentifier" : "73249a8c-8e86-3ac1-546a-50a37b15894c",
                "name" : "Set LISTAGG",
                "type" : "PROCESSOR"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "57ebc5c4-0ca8-33d0-af66-11bd97550603",
              "instanceIdentifier" : "0bddc37f-d28c-34a2-2aca-68549d465f42",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "" ],
              "source" : {
                "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "id" : "ee382eca-470b-340d-a3ab-3dae66081497",
                "instanceIdentifier" : "bddb4201-bd93-3e39-ecc0-64cf6c2ed8ef",
                "name" : "OUTPUT",
                "type" : "OUTPUT_PORT"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "d868c220-fbb5-30d6-b653-fcf198981d44",
                "instanceIdentifier" : "849288b9-40d8-3a22-55e4-7ae4f66d850e",
                "name" : "Funnel",
                "type" : "FUNNEL"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "0645bfc8-c682-362c-8f18-382572d94aec",
              "instanceIdentifier" : "68f6542f-5ee7-374a-6343-13c48df5353e",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "" ],
              "source" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "f511250b-fc90-3075-9e88-07096e7f6ba1",
                "instanceIdentifier" : "4ea573b0-e64c-3e0b-676b-570e50ebf8f4",
                "name" : "Funnel",
                "type" : "FUNNEL"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "f803d01f-3c61-3745-ad06-ad65df813a78",
                "instanceIdentifier" : "ca81b1c8-b75f-3ba5-e7b9-c7366df80790",
                "name" : "Clear Obsolete Attributes",
                "type" : "PROCESSOR"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "819b2ec3-bdf5-3c34-a04d-d8b4d751e813",
              "instanceIdentifier" : "ccad85de-018a-1000-9ec0-378ae9b4fbd8",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "success" ],
              "source" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "f2d28682-6418-3a3b-bbd9-ce2a190cb561",
                "instanceIdentifier" : "59ff73fe-91f3-3b8f-5892-4494c73bc67e",
                "name" : "Transform Document - Find Facets For Category From Database",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "f511250b-fc90-3075-9e88-07096e7f6ba1",
                "instanceIdentifier" : "4ea573b0-e64c-3e0b-676b-570e50ebf8f4",
                "name" : "Funnel",
                "type" : "FUNNEL"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "b010176a-f266-314e-8da4-fc29c214e04f",
              "instanceIdentifier" : "88f60fb4-7019-3a9d-b074-294aaed7ebb2",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "failure" ],
              "source" : {
                "comments" : "        SELECT AF.CATALOG_ID,\n\t\t   AF.CATGROUP_ID, \n           ${function.listagg.prefix} ${function.clob.cast.prefix} COALESCE(AF.NAME, '') ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} NAME,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.ATTR_ID ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} ATTR_ID,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.IDENTIFIER ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} IDENTIFIER,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.MAX_DISPLAY ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} MAX_DISPLAY,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.SELECTION ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} SELECTION,\n\t\t   ${function.listagg.prefix} COALESCE(FCG.SEQUENCE, AF.SEQUENCE) ${function.listagg.suffix} ${function.within.group} SEQUENCE,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.FACET_ID ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} FACET_ID,\n           ${function.listagg.prefix} AF.SORT_ORDER ${function.listagg.suffix} ${function.within.group} SORT_ORDER,\n           ${function.listagg.prefix} AF.ZERO_DISPLAY ${function.listagg.suffix} ${function.within.group} ZERO_DISPLAY,\n           ${function.listagg.prefix} AF.GROUP_ID ${function.listagg.suffix} ${function.within.group} GROUP_ID,\n           ${function.listagg.prefix} AF.KEYWORD_SEARCH ${function.listagg.suffix} ${function.within.group} KEYWORD_SEARCH,\n           ${function.listagg.prefix} AF.FACETABLE ${function.listagg.suffix} ${function.within.group} FACETABLE,\n           ${function.listagg.prefix} AF.SWATCHABLE ${function.listagg.suffix} ${function.within.group} SWATCHABLE,\n           ${function.listagg.prefix} AF.STOREDISPLAY ${function.listagg.suffix} ${function.within.group} STOREDISPLAY,\n\t\t   ${function.listagg.prefix} COALESCE(FCG.DISPLAYABLE, 1) ${function.listagg.suffix} ${function.within.group} DISPLAYABLE\n     FROM (SELECT I.CATALOG_ID, I.CATGROUP_ID,\n           A.NAME AS NAME,\n           A.ATTR_ID  ATTR_ID,\n           A.IDENTIFIER  IDENTIFIER,\n           F.MAX_DISPLAY  MAX_DISPLAY,\n           F.SELECTION  SELECTION,\n           F.FACET_ID  FACET_ID,\n           F.SORT_ORDER  SORT_ORDER,\n           F.ZERO_DISPLAY  ZERO_DISPLAY,\n           F.SEQUENCE SEQUENCE,\n           (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n           F.KEYWORD_SEARCH  KEYWORD_SEARCH,\n           A.FACETABLE  FACETABLE,\n           A.SWATCHABLE  SWATCHABLE,\n           (CASE WHEN A.STOREDISPLAY IS NOT NULL THEN A.STOREDISPLAY ELSE 0 END) AS STOREDISPLAY\n      FROM (SELECT A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, COALESCE(D.NAME, DF.NAME) NAME\n              FROM ATTR A\n                   LEFT JOIN ATTRDESC D ON D.ATTR_ID = A.ATTR_ID AND D.LANGUAGE_ID = ${param.langId}\n                   LEFT OUTER JOIN ATTRDESC DF ON DF.ATTR_ID = A.ATTR_ID AND DF.LANGUAGE_ID = ${default.language}) A,\n                   FACET F,\n                   (SELECT DISTINCT P.CATALOG_ID, P.CATGROUP_ID, C.ATTR_ID, H.CATGROUP_ID_PARENT\n                      FROM CATGPENREL P, CATENTRYATTR C,\n                           (SELECT G.CATGROUP_ID, R.CATALOG_ID, R.CATGROUP_ID_PARENT\n                              FROM CATGRPREL R, CATGROUP G\n                             WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID_CHILD = G.CATGROUP_ID AND G.MARKFORDELETE = 0\n                            UNION\n                           SELECT G.CATGROUP_ID, R.CATALOG_ID, ${function.long.null}\n                             FROM CATTOGRP R, CATGROUP G\n                            WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID = G.CATGROUP_ID AND G.MARKFORDELETE = 0) H\n                      WHERE P.CATALOG_ID = H.CATALOG_ID AND P.CATGROUP_ID = H.CATGROUP_ID\n                        AND P.CATENTRY_ID = C.CATENTRY_ID ${extCatgroupAndSQL1a}) I\n            LEFT JOIN FACETCATGRP FCG2 ON  FCG2.CATGROUP_ID = I.CATGROUP_ID\n\t\t    ${TI_DELTA_CG_FACET_JOIN_QUERY}\n            ${X_CUSTOM_CG_FACET_JOIN_QUERY}\n     WHERE I.ATTR_ID = A.ATTR_ID AND A.ATTR_ID = F.ATTR_ID AND A.FACETABLE = 1\n       AND F.STOREENT_ID IN\n           (SELECT RELATEDSTORE_ID FROM STOREREL WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId})\n\t\t UNION \n\t\t   SELECT ${param.catalogId} AS CATALOG_ID,\n           C.CATGROUP_ID, \n\t\t   ('facet' || TO_CHAR(SA.SRCHATTR_ID)) NAME,\n\t\t   SA.SRCHATTR_ID ATTR_ID,\n\t\t   ('facet' || TO_CHAR(SA.SRCHATTR_ID)) IDENTIFIER,\n           F.MAX_DISPLAY MAX_DISPLAY,\n\t\t   F.SELECTION  SELECTION,\n           F.FACET_ID  FACET_ID,\n           F.SORT_ORDER  SORT_ORDER,\n           F.ZERO_DISPLAY  ZERO_DISPLAY,\n           F.SEQUENCE SEQUENCE,\n           (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n           F.KEYWORD_SEARCH  KEYWORD_SEARCH,\n           1 AS  FACETABLE,\n           0 AS  SWATCHABLE,\n\t\t   0 AS STOREDISPLAY\n\t\t   FROM SRCHATTR SA,  FACET F,  (SELECT G.CATGROUP_ID, R.CATALOG_ID\n                              FROM CATGRPREL R, CATGROUP G\n                             WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID_CHILD = G.CATGROUP_ID AND G.MARKFORDELETE = 0\n                            UNION\n                           SELECT G.CATGROUP_ID, R.CATALOG_ID\n                             FROM CATTOGRP R, CATGROUP G\n                            WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID = G.CATGROUP_ID AND G.MARKFORDELETE = 0) H,\n                              CATGROUP C\n\t\t   ${TI_DELTA_CG_JOIN_QUERY}\n           ${X_CUSTOM_CG_JOIN_QUERY}\n\t\t    WHERE SA.SRCHATTR_ID = F.SRCHATTR_ID AND SA.SRCHATTR_ID IN (-1002, -1013, -1101) AND H.CATALOG_ID = ${param.catalogId} \n\t\t       AND C.CATGROUP_ID = H.CATGROUP_ID\n\t\t  ${extCatgroupAndSQL} \n\t\t  UNION\n\t\t  SELECT \n\t\t${param.catalogId} AS CATALOG_ID, \n\t\tFCG3.CATGROUP_ID,\n\t\tATD.NAME AS NAME,\n\t\tA.ATTR_ID AS ATTR_ID,\n\t\tA.IDENTIFIER AS IDENTIFIER,\n\t\tF.MAX_DISPLAY AS MAX_DISPLAY,\n\t\tF.SELECTION AS SELECTION,\n\t\tF.FACET_ID AS FACET_ID, \n\t\tF.SORT_ORDER AS SORT_ORDER,\n\t\tF.ZERO_DISPLAY AS ZERO_DISPLAY,\n\t\tCOALESCE(FCG3.SEQUENCE, A.SEQUENCE) AS SEQUENCE,\n\t\t(CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n\t\tF.KEYWORD_SEARCH AS KEYWORD_SEARCH,\n\t\tA.FACETABLE AS FACETABLE,\n\t\tA.SWATCHABLE AS SWATCHABLE,\n\t\t(CASE WHEN A.STOREDISPLAY IS NOT NULL THEN A.STOREDISPLAY ELSE 0 END) AS  STOREDISPLAY\n\t\tFROM FACETCATGRP FCG3 JOIN FACET F ON F.FACET_ID = FCG3.FACET_ID\n\t\tJOIN ATTR A ON A.ATTR_ID = F.ATTR_ID \n\t\tJOIN ATTRDESC ATD ON A.ATTR_ID  = ATD.ATTR_ID \n\t\tWHERE \n\t\tATD.LANGUAGE_ID = ${param.langId} AND 'true' = (SELECT LOWER(D.CONTENT) FROM EMSPOT E, DMEMSPOTDEF D, STOREREL R WHERE \n\t\tR.RELATEDSTORE_ID = E.STOREENT_ID AND R.STATE = 1 AND R.STRELTYP_ID = -11 AND R.STORE_ID = ${param.storeId} AND \n\t\tR.STORE_ID= D.STOREENT_ID AND E.USAGETYPE = 'STOREFEATURE' AND E.EMSPOT_ID = D.EMSPOT_ID AND D.CONTENTTYPE = 'FeatureEnabled' AND E.NAME= 'ExpandedCategoryNavigation')\n\t\tAND FCG3.STOREENT_ID IN (SELECT RELATEDSTORE_ID FROM STOREREL WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId})) AF\n        LEFT JOIN FACETCATGRP FCG ON FCG.FACET_ID = AF.FACET_ID AND FCG.STOREENT_ID = ${param.storeId} AND FCG.CATGROUP_ID = AF.CATGROUP_ID\n     ${function.group}\n     ORDER BY AF.CATALOG_ID, AF.CATGROUP_ID",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "1195761e-3951-3a91-a4d3-f012e3bbe9ab",
                "instanceIdentifier" : "6774cc91-c653-3273-4f96-0b88b5ccf52c",
                "name" : "Find Facets SQL - LISTAGG",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "d868c220-fbb5-30d6-b653-fcf198981d44",
                "instanceIdentifier" : "849288b9-40d8-3a22-55e4-7ae4f66d850e",
                "name" : "Funnel",
                "type" : "FUNNEL"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "de9e08c4-b9e0-3d58-8366-fb24943285d0",
              "instanceIdentifier" : "59555da1-f27c-34d5-6c69-f855107fee39",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "failure" ],
              "source" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "f2d28682-6418-3a3b-bbd9-ce2a190cb561",
                "instanceIdentifier" : "59ff73fe-91f3-3b8f-5892-4494c73bc67e",
                "name" : "Transform Document - Find Facets For Category From Database",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "f2d28682-6418-3a3b-bbd9-ce2a190cb561",
                "instanceIdentifier" : "59ff73fe-91f3-3b8f-5892-4494c73bc67e",
                "name" : "Transform Document - Find Facets For Category From Database",
                "type" : "PROCESSOR"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "cd449803-2709-38e4-bea7-4b68a08d7313",
              "instanceIdentifier" : "3c396666-4e88-3763-f748-9716badf96dd",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "success" ],
              "source" : {
                "comments" : "        SELECT AF.CATGROUP_ID, \n           AF.NAME NAME,\n           AF.LANGUAGE_ID LANGUAGE_ID,\n           AF.ATTR_ID ATTR_ID,\n           AF.IDENTIFIER IDENTIFIER,\n           AF.MAX_DISPLAY MAX_DISPLAY,\n           AF.SELECTION SELECTION,\n\t\t   AF.SEQUENCE SEQUENCE,\n           AF.FACET_ID FACET_ID,\n           AF.SORT_ORDER SORT_ORDER,\n           AF.ZERO_DISPLAY ZERO_DISPLAY,\n           AF.GROUP_ID GROUP_ID,\n           AF.KEYWORD_SEARCH KEYWORD_SEARCH,\n           AF.FACETABLE FACETABLE,\n           AF.SWATCHABLE SWATCHABLE,\n           AF.STOREDISPLAY STOREDISPLAY,\n\t\t   FCG.SEQUENCE FCG_SEQUENCE,\n\t\t   FCG.DISPLAYABLE FCG_DISPLAYABLE,\n\t\t   FCG.STOREENT_ID FCG_STOREENT_ID\n     FROM (\n     \t       SELECT I.CATGROUP_ID, I.NAME AS NAME, TO_CHAR(I.LANGUAGE_ID) LANGUAGE_ID, I.ATTR_ID  ATTR_ID, I.IDENTIFIER IDENTIFIER, F.MAX_DISPLAY  MAX_DISPLAY, F.SELECTION  SELECTION, F.FACET_ID FACET_ID, F.SORT_ORDER  SORT_ORDER, F.ZERO_DISPLAY  ZERO_DISPLAY,\n                  F.SEQUENCE SEQUENCE, (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID, F.KEYWORD_SEARCH  KEYWORD_SEARCH, I.FACETABLE FACETABLE, I.SWATCHABLE  SWATCHABLE,\n                  (CASE WHEN I.STOREDISPLAY IS NOT NULL THEN I.STOREDISPLAY ELSE 0 END) AS STOREDISPLAY\n               FROM FACET F,\n                  (SELECT DISTINCT P.CATGROUP_ID, A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, D.NAME, D.LANGUAGE_ID \n                   FROM CATGPENREL P, CATENTRYATTR C, ATTR A\n\t\t           LEFT JOIN ATTRDESC D ON D.ATTR_ID = A.ATTR_ID AND D.LANGUAGE_ID IN (${supported.language})\n                   WHERE P.CATGROUP_ID IN (${data.catgroupId}) AND C.ATTR_ID = A.ATTR_ID AND A.FACETABLE  = 1 \n                       AND P.CATENTRY_ID = C.CATENTRY_ID\n                    UNION SELECT FCG.CATGROUP_ID, A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, ATD.NAME, ATD.LANGUAGE_ID FROM FACETCATGRP FCG\n\t\t\t\t\tJOIN FACET F ON F.FACET_ID = FCG.FACET_ID\n                    JOIN ATTR A ON A.ATTR_ID = F.ATTR_ID JOIN ATTRDESC ATD ON A.ATTR_ID  = ATD.ATTR_ID WHERE ATD.LANGUAGE_ID IN (${supported.language})) I\n                       LEFT JOIN FACETCATGRP FCG2 ON FCG2.CATGROUP_ID = I.CATGROUP_ID\n                       ${X_CUSTOM_CG_FACET_JOIN_QUERY}\n                WHERE I.ATTR_ID = F.ATTR_ID AND F.STOREENT_ID IN (${param.allStoreIds})\n\t\t   UNION \n\t\t        SELECT H.CATGROUP_ID, ('facet' || TO_CHAR(SA.SRCHATTR_ID)) NAME, ' ' AS LANGUAGE_ID, SA.SRCHATTR_ID ATTR_ID, ('facet' || TO_CHAR(SA.SRCHATTR_ID)) IDENTIFIER, F.MAX_DISPLAY MAX_DISPLAY, F.SELECTION  SELECTION, F.FACET_ID  FACET_ID, \n\t\t           F.SORT_ORDER SORT_ORDER, F.ZERO_DISPLAY  ZERO_DISPLAY, F.SEQUENCE SEQUENCE, (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID, F.KEYWORD_SEARCH  KEYWORD_SEARCH, 1 AS  FACETABLE, 0 AS  SWATCHABLE, 0 AS STOREDISPLAY\n\t\t        FROM SRCHATTR SA, FACET F, CATGROUP H\n\t\t       WHERE SA.SRCHATTR_ID = F.SRCHATTR_ID AND SA.SRCHATTR_ID IN (-1002, -1013, -1101) AND CATGROUP_ID IN (${data.catgroupId})\n\t\t  ) AF\n        LEFT JOIN FACETCATGRP FCG ON FCG.FACET_ID = AF.FACET_ID AND FCG.STOREENT_ID IN (${param.allStoreIds}) AND FCG.CATGROUP_ID = AF.CATGROUP_ID\n     ORDER BY AF.CATGROUP_ID, AF.ATTR_ID",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "4c28674b-9e74-372e-8309-ea05d15e07ea",
                "instanceIdentifier" : "835f3585-1faf-3bd7-2425-5b1a690d6939",
                "name" : "Find Facets SQL",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "id" : "28bf8d80-1e7b-32c7-8dac-161dd050e448",
                "instanceIdentifier" : "69a43fe9-2f45-356b-1e96-a6abb9df9389",
                "name" : "INPUT",
                "type" : "INPUT_PORT"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "344e087c-033c-3c94-9921-3a86ed33b8d6",
              "instanceIdentifier" : "cd253da8-f28b-3f7f-3a61-4907ce3e1dc8",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "" ],
              "source" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "a8b09196-ff57-3afc-be7c-6cbd7aa26b56",
                "instanceIdentifier" : "fb2f18a2-5fed-3b45-fad6-8d5ab3523c33",
                "name" : "INPUT",
                "type" : "INPUT_PORT"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "b20dcc17-0d6b-35b8-a896-cae9dbc04480",
                "instanceIdentifier" : "b9cf7fc4-936d-38b9-3875-646506b0ad1d",
                "name" : "SUCCESS",
                "type" : "OUTPUT_PORT"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "bbf64fd4-a277-3362-8c08-8f39b4100054",
              "instanceIdentifier" : "5174cc36-e008-311b-baa7-5b191d7929ae",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "success" ],
              "source" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "f803d01f-3c61-3745-ad06-ad65df813a78",
                "instanceIdentifier" : "ca81b1c8-b75f-3ba5-e7b9-c7366df80790",
                "name" : "Clear Obsolete Attributes",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "f511250b-fc90-3075-9e88-07096e7f6ba1",
                "instanceIdentifier" : "4ea573b0-e64c-3e0b-676b-570e50ebf8f4",
                "name" : "Funnel",
                "type" : "FUNNEL"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "e65152b5-c0de-3317-9be3-4fa6221639d4",
              "instanceIdentifier" : "7eea3fa4-c123-3951-849a-8250d7394b91",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "" ],
              "source" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "88356737-528b-37d4-ac1e-0d9634ee3689",
                "instanceIdentifier" : "bfed7e61-3d00-333e-dac2-f4e3fc2f2726",
                "name" : "Funnel",
                "type" : "FUNNEL"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "f2d28682-6418-3a3b-bbd9-ce2a190cb561",
                "instanceIdentifier" : "59ff73fe-91f3-3b8f-5892-4494c73bc67e",
                "name" : "Transform Document - Find Facets For Category From Database",
                "type" : "PROCESSOR"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "d6b99c39-1945-382b-9769-8d0cd896e7c6",
              "instanceIdentifier" : "a450a36c-e1c5-32fc-1426-6030f3256f6f",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "success" ],
              "source" : {
                "comments" : "        SELECT AF.CATALOG_ID,\n\t\t   AF.CATGROUP_ID, \n           ${function.listagg.prefix} ${function.clob.cast.prefix} COALESCE(AF.NAME, '') ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} NAME,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.ATTR_ID ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} ATTR_ID,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.IDENTIFIER ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} IDENTIFIER,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.MAX_DISPLAY ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} MAX_DISPLAY,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.SELECTION ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} SELECTION,\n\t\t   ${function.listagg.prefix} COALESCE(FCG.SEQUENCE, AF.SEQUENCE) ${function.listagg.suffix} ${function.within.group} SEQUENCE,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.FACET_ID ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} FACET_ID,\n           ${function.listagg.prefix} AF.SORT_ORDER ${function.listagg.suffix} ${function.within.group} SORT_ORDER,\n           ${function.listagg.prefix} AF.ZERO_DISPLAY ${function.listagg.suffix} ${function.within.group} ZERO_DISPLAY,\n           ${function.listagg.prefix} AF.GROUP_ID ${function.listagg.suffix} ${function.within.group} GROUP_ID,\n           ${function.listagg.prefix} AF.KEYWORD_SEARCH ${function.listagg.suffix} ${function.within.group} KEYWORD_SEARCH,\n           ${function.listagg.prefix} AF.FACETABLE ${function.listagg.suffix} ${function.within.group} FACETABLE,\n           ${function.listagg.prefix} AF.SWATCHABLE ${function.listagg.suffix} ${function.within.group} SWATCHABLE,\n           ${function.listagg.prefix} AF.STOREDISPLAY ${function.listagg.suffix} ${function.within.group} STOREDISPLAY,\n\t\t   ${function.listagg.prefix} COALESCE(FCG.DISPLAYABLE, 1) ${function.listagg.suffix} ${function.within.group} DISPLAYABLE\n     FROM (SELECT I.CATALOG_ID, I.CATGROUP_ID,\n           A.NAME AS NAME,\n           A.ATTR_ID  ATTR_ID,\n           A.IDENTIFIER  IDENTIFIER,\n           F.MAX_DISPLAY  MAX_DISPLAY,\n           F.SELECTION  SELECTION,\n           F.FACET_ID  FACET_ID,\n           F.SORT_ORDER  SORT_ORDER,\n           F.ZERO_DISPLAY  ZERO_DISPLAY,\n           F.SEQUENCE SEQUENCE,\n           (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n           F.KEYWORD_SEARCH  KEYWORD_SEARCH,\n           A.FACETABLE  FACETABLE,\n           A.SWATCHABLE  SWATCHABLE,\n           (CASE WHEN A.STOREDISPLAY IS NOT NULL THEN A.STOREDISPLAY ELSE 0 END) AS STOREDISPLAY\n      FROM (SELECT A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, COALESCE(D.NAME, DF.NAME) NAME\n              FROM ATTR A\n                   LEFT JOIN ATTRDESC D ON D.ATTR_ID = A.ATTR_ID AND D.LANGUAGE_ID = ${param.langId}\n                   LEFT OUTER JOIN ATTRDESC DF ON DF.ATTR_ID = A.ATTR_ID AND DF.LANGUAGE_ID = ${default.language}) A,\n                   FACET F,\n                   (SELECT DISTINCT P.CATALOG_ID, P.CATGROUP_ID, C.ATTR_ID, H.CATGROUP_ID_PARENT\n                      FROM CATGPENREL P, CATENTRYATTR C,\n                           (SELECT G.CATGROUP_ID, R.CATALOG_ID, R.CATGROUP_ID_PARENT\n                              FROM CATGRPREL R, CATGROUP G\n                             WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID_CHILD = G.CATGROUP_ID AND G.MARKFORDELETE = 0\n                            UNION\n                           SELECT G.CATGROUP_ID, R.CATALOG_ID, ${function.long.null}\n                             FROM CATTOGRP R, CATGROUP G\n                            WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID = G.CATGROUP_ID AND G.MARKFORDELETE = 0) H\n                      WHERE P.CATALOG_ID = H.CATALOG_ID AND P.CATGROUP_ID = H.CATGROUP_ID\n                        AND P.CATENTRY_ID = C.CATENTRY_ID ${extCatgroupAndSQL1a}) I\n            LEFT JOIN FACETCATGRP FCG2 ON  FCG2.CATGROUP_ID = I.CATGROUP_ID\n\t\t    ${TI_DELTA_CG_FACET_JOIN_QUERY}\n            ${X_CUSTOM_CG_FACET_JOIN_QUERY}\n     WHERE I.ATTR_ID = A.ATTR_ID AND A.ATTR_ID = F.ATTR_ID AND A.FACETABLE = 1\n       AND F.STOREENT_ID IN\n           (SELECT RELATEDSTORE_ID FROM STOREREL WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId})\n\t\t UNION \n\t\t   SELECT ${param.catalogId} AS CATALOG_ID,\n           C.CATGROUP_ID, \n\t\t   ('facet' || TO_CHAR(SA.SRCHATTR_ID)) NAME,\n\t\t   SA.SRCHATTR_ID ATTR_ID,\n\t\t   ('facet' || TO_CHAR(SA.SRCHATTR_ID)) IDENTIFIER,\n           F.MAX_DISPLAY MAX_DISPLAY,\n\t\t   F.SELECTION  SELECTION,\n           F.FACET_ID  FACET_ID,\n           F.SORT_ORDER  SORT_ORDER,\n           F.ZERO_DISPLAY  ZERO_DISPLAY,\n           F.SEQUENCE SEQUENCE,\n           (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n           F.KEYWORD_SEARCH  KEYWORD_SEARCH,\n           1 AS  FACETABLE,\n           0 AS  SWATCHABLE,\n\t\t   0 AS STOREDISPLAY\n\t\t   FROM SRCHATTR SA,  FACET F,  (SELECT G.CATGROUP_ID, R.CATALOG_ID\n                              FROM CATGRPREL R, CATGROUP G\n                             WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID_CHILD = G.CATGROUP_ID AND G.MARKFORDELETE = 0\n                            UNION\n                           SELECT G.CATGROUP_ID, R.CATALOG_ID\n                             FROM CATTOGRP R, CATGROUP G\n                            WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID = G.CATGROUP_ID AND G.MARKFORDELETE = 0) H,\n                              CATGROUP C\n\t\t   ${TI_DELTA_CG_JOIN_QUERY}\n           ${X_CUSTOM_CG_JOIN_QUERY}\n\t\t    WHERE SA.SRCHATTR_ID = F.SRCHATTR_ID AND SA.SRCHATTR_ID IN (-1002, -1013, -1101) AND H.CATALOG_ID = ${param.catalogId} \n\t\t       AND C.CATGROUP_ID = H.CATGROUP_ID\n\t\t  ${extCatgroupAndSQL} \n\t\t  UNION\n\t\t  SELECT \n\t\t${param.catalogId} AS CATALOG_ID, \n\t\tFCG3.CATGROUP_ID,\n\t\tATD.NAME AS NAME,\n\t\tA.ATTR_ID AS ATTR_ID,\n\t\tA.IDENTIFIER AS IDENTIFIER,\n\t\tF.MAX_DISPLAY AS MAX_DISPLAY,\n\t\tF.SELECTION AS SELECTION,\n\t\tF.FACET_ID AS FACET_ID, \n\t\tF.SORT_ORDER AS SORT_ORDER,\n\t\tF.ZERO_DISPLAY AS ZERO_DISPLAY,\n\t\tCOALESCE(FCG3.SEQUENCE, A.SEQUENCE) AS SEQUENCE,\n\t\t(CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n\t\tF.KEYWORD_SEARCH AS KEYWORD_SEARCH,\n\t\tA.FACETABLE AS FACETABLE,\n\t\tA.SWATCHABLE AS SWATCHABLE,\n\t\t(CASE WHEN A.STOREDISPLAY IS NOT NULL THEN A.STOREDISPLAY ELSE 0 END) AS  STOREDISPLAY\n\t\tFROM FACETCATGRP FCG3 JOIN FACET F ON F.FACET_ID = FCG3.FACET_ID\n\t\tJOIN ATTR A ON A.ATTR_ID = F.ATTR_ID \n\t\tJOIN ATTRDESC ATD ON A.ATTR_ID  = ATD.ATTR_ID \n\t\tWHERE \n\t\tATD.LANGUAGE_ID = ${param.langId} AND 'true' = (SELECT LOWER(D.CONTENT) FROM EMSPOT E, DMEMSPOTDEF D, STOREREL R WHERE \n\t\tR.RELATEDSTORE_ID = E.STOREENT_ID AND R.STATE = 1 AND R.STRELTYP_ID = -11 AND R.STORE_ID = ${param.storeId} AND \n\t\tR.STORE_ID= D.STOREENT_ID AND E.USAGETYPE = 'STOREFEATURE' AND E.EMSPOT_ID = D.EMSPOT_ID AND D.CONTENTTYPE = 'FeatureEnabled' AND E.NAME= 'ExpandedCategoryNavigation')\n\t\tAND FCG3.STOREENT_ID IN (SELECT RELATEDSTORE_ID FROM STOREREL WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId})) AF\n        LEFT JOIN FACETCATGRP FCG ON FCG.FACET_ID = AF.FACET_ID AND FCG.STOREENT_ID = ${param.storeId} AND FCG.CATGROUP_ID = AF.CATGROUP_ID\n     ${function.group}\n     ORDER BY AF.CATALOG_ID, AF.CATGROUP_ID",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "1195761e-3951-3a91-a4d3-f012e3bbe9ab",
                "instanceIdentifier" : "6774cc91-c653-3273-4f96-0b88b5ccf52c",
                "name" : "Find Facets SQL - LISTAGG",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "88356737-528b-37d4-ac1e-0d9634ee3689",
                "instanceIdentifier" : "bfed7e61-3d00-333e-dac2-f4e3fc2f2726",
                "name" : "Funnel",
                "type" : "FUNNEL"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "002bf054-3ba7-3478-a9a9-37c8346e10d2",
              "instanceIdentifier" : "62753932-f45d-39e1-a51b-f6349b3021cf",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "" ],
              "source" : {
                "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "id" : "c6bc695f-8385-3f62-9cf8-6ef3a7bc7adf",
                "instanceIdentifier" : "195229c6-8ce9-391f-d86f-ee6a1bf3818b",
                "name" : "ERROR",
                "type" : "OUTPUT_PORT"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "        SELECT AF.CATGROUP_ID, \n           AF.NAME NAME,\n           AF.LANGUAGE_ID LANGUAGE_ID,\n           AF.ATTR_ID ATTR_ID,\n           AF.IDENTIFIER IDENTIFIER,\n           AF.MAX_DISPLAY MAX_DISPLAY,\n           AF.SELECTION SELECTION,\n\t\t   AF.SEQUENCE SEQUENCE,\n           AF.FACET_ID FACET_ID,\n           AF.SORT_ORDER SORT_ORDER,\n           AF.ZERO_DISPLAY ZERO_DISPLAY,\n           AF.GROUP_ID GROUP_ID,\n           AF.KEYWORD_SEARCH KEYWORD_SEARCH,\n           AF.FACETABLE FACETABLE,\n           AF.SWATCHABLE SWATCHABLE,\n           AF.STOREDISPLAY STOREDISPLAY,\n\t\t   FCG.SEQUENCE FCG_SEQUENCE,\n\t\t   FCG.DISPLAYABLE FCG_DISPLAYABLE,\n\t\t   FCG.STOREENT_ID FCG_STOREENT_ID\n     FROM (\n     \t       SELECT I.CATGROUP_ID, I.NAME AS NAME, TO_CHAR(I.LANGUAGE_ID) LANGUAGE_ID, I.ATTR_ID  ATTR_ID, I.IDENTIFIER IDENTIFIER, F.MAX_DISPLAY  MAX_DISPLAY, F.SELECTION  SELECTION, F.FACET_ID FACET_ID, F.SORT_ORDER  SORT_ORDER, F.ZERO_DISPLAY  ZERO_DISPLAY,\n                  F.SEQUENCE SEQUENCE, (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID, F.KEYWORD_SEARCH  KEYWORD_SEARCH, I.FACETABLE FACETABLE, I.SWATCHABLE  SWATCHABLE,\n                  (CASE WHEN I.STOREDISPLAY IS NOT NULL THEN I.STOREDISPLAY ELSE 0 END) AS STOREDISPLAY\n               FROM FACET F,\n                  (SELECT DISTINCT P.CATGROUP_ID, A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, D.NAME, D.LANGUAGE_ID \n                   FROM CATGPENREL P, CATENTRYATTR C, ATTR A\n\t\t           LEFT JOIN ATTRDESC D ON D.ATTR_ID = A.ATTR_ID AND D.LANGUAGE_ID IN (${supported.language})\n                   WHERE P.CATGROUP_ID IN (${data.catgroupId}) AND C.ATTR_ID = A.ATTR_ID AND A.FACETABLE  = 1 \n                       AND P.CATENTRY_ID = C.CATENTRY_ID\n                    UNION SELECT FCG.CATGROUP_ID, A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, ATD.NAME, ATD.LANGUAGE_ID FROM FACETCATGRP FCG\n\t\t\t\t\tJOIN FACET F ON F.FACET_ID = FCG.FACET_ID\n                    JOIN ATTR A ON A.ATTR_ID = F.ATTR_ID JOIN ATTRDESC ATD ON A.ATTR_ID  = ATD.ATTR_ID WHERE ATD.LANGUAGE_ID IN (${supported.language})) I\n                       LEFT JOIN FACETCATGRP FCG2 ON FCG2.CATGROUP_ID = I.CATGROUP_ID\n                       ${X_CUSTOM_CG_FACET_JOIN_QUERY}\n                WHERE I.ATTR_ID = F.ATTR_ID AND F.STOREENT_ID IN (${param.allStoreIds})\n\t\t   UNION \n\t\t        SELECT H.CATGROUP_ID, ('facet' || TO_CHAR(SA.SRCHATTR_ID)) NAME, ' ' AS LANGUAGE_ID, SA.SRCHATTR_ID ATTR_ID, ('facet' || TO_CHAR(SA.SRCHATTR_ID)) IDENTIFIER, F.MAX_DISPLAY MAX_DISPLAY, F.SELECTION  SELECTION, F.FACET_ID  FACET_ID, \n\t\t           F.SORT_ORDER SORT_ORDER, F.ZERO_DISPLAY  ZERO_DISPLAY, F.SEQUENCE SEQUENCE, (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID, F.KEYWORD_SEARCH  KEYWORD_SEARCH, 1 AS  FACETABLE, 0 AS  SWATCHABLE, 0 AS STOREDISPLAY\n\t\t        FROM SRCHATTR SA, FACET F, CATGROUP H\n\t\t       WHERE SA.SRCHATTR_ID = F.SRCHATTR_ID AND SA.SRCHATTR_ID IN (-1002, -1013, -1101) AND CATGROUP_ID IN (${data.catgroupId})\n\t\t  ) AF\n        LEFT JOIN FACETCATGRP FCG ON FCG.FACET_ID = AF.FACET_ID AND FCG.STOREENT_ID IN (${param.allStoreIds}) AND FCG.CATGROUP_ID = AF.CATGROUP_ID\n     ORDER BY AF.CATGROUP_ID, AF.ATTR_ID",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "4c28674b-9e74-372e-8309-ea05d15e07ea",
                "instanceIdentifier" : "835f3585-1faf-3bd7-2425-5b1a690d6939",
                "name" : "Find Facets SQL",
                "type" : "PROCESSOR"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "de086aa5-7da8-399a-8acb-a33971887819",
              "instanceIdentifier" : "b5af9ff4-e9fb-3cc2-7036-2e177127efd9",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "unmatched" ],
              "source" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "0ccc39b2-9f24-356f-8020-2e79bb2cc8e0",
                "instanceIdentifier" : "1a50db44-6642-3668-a8ca-2534f8cb579b",
                "name" : "Route on LISTAGG",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "        SELECT AF.CATALOG_ID,\n\t\t   AF.CATGROUP_ID, \n           ${function.listagg.prefix} ${function.clob.cast.prefix} COALESCE(AF.NAME, '') ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} NAME,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.ATTR_ID ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} ATTR_ID,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.IDENTIFIER ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} IDENTIFIER,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.MAX_DISPLAY ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} MAX_DISPLAY,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.SELECTION ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} SELECTION,\n\t\t   ${function.listagg.prefix} COALESCE(FCG.SEQUENCE, AF.SEQUENCE) ${function.listagg.suffix} ${function.within.group} SEQUENCE,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.FACET_ID ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} FACET_ID,\n           ${function.listagg.prefix} AF.SORT_ORDER ${function.listagg.suffix} ${function.within.group} SORT_ORDER,\n           ${function.listagg.prefix} AF.ZERO_DISPLAY ${function.listagg.suffix} ${function.within.group} ZERO_DISPLAY,\n           ${function.listagg.prefix} AF.GROUP_ID ${function.listagg.suffix} ${function.within.group} GROUP_ID,\n           ${function.listagg.prefix} AF.KEYWORD_SEARCH ${function.listagg.suffix} ${function.within.group} KEYWORD_SEARCH,\n           ${function.listagg.prefix} AF.FACETABLE ${function.listagg.suffix} ${function.within.group} FACETABLE,\n           ${function.listagg.prefix} AF.SWATCHABLE ${function.listagg.suffix} ${function.within.group} SWATCHABLE,\n           ${function.listagg.prefix} AF.STOREDISPLAY ${function.listagg.suffix} ${function.within.group} STOREDISPLAY,\n\t\t   ${function.listagg.prefix} COALESCE(FCG.DISPLAYABLE, 1) ${function.listagg.suffix} ${function.within.group} DISPLAYABLE\n     FROM (SELECT I.CATALOG_ID, I.CATGROUP_ID,\n           A.NAME AS NAME,\n           A.ATTR_ID  ATTR_ID,\n           A.IDENTIFIER  IDENTIFIER,\n           F.MAX_DISPLAY  MAX_DISPLAY,\n           F.SELECTION  SELECTION,\n           F.FACET_ID  FACET_ID,\n           F.SORT_ORDER  SORT_ORDER,\n           F.ZERO_DISPLAY  ZERO_DISPLAY,\n           F.SEQUENCE SEQUENCE,\n           (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n           F.KEYWORD_SEARCH  KEYWORD_SEARCH,\n           A.FACETABLE  FACETABLE,\n           A.SWATCHABLE  SWATCHABLE,\n           (CASE WHEN A.STOREDISPLAY IS NOT NULL THEN A.STOREDISPLAY ELSE 0 END) AS STOREDISPLAY\n      FROM (SELECT A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, COALESCE(D.NAME, DF.NAME) NAME\n              FROM ATTR A\n                   LEFT JOIN ATTRDESC D ON D.ATTR_ID = A.ATTR_ID AND D.LANGUAGE_ID = ${param.langId}\n                   LEFT OUTER JOIN ATTRDESC DF ON DF.ATTR_ID = A.ATTR_ID AND DF.LANGUAGE_ID = ${default.language}) A,\n                   FACET F,\n                   (SELECT DISTINCT P.CATALOG_ID, P.CATGROUP_ID, C.ATTR_ID, H.CATGROUP_ID_PARENT\n                      FROM CATGPENREL P, CATENTRYATTR C,\n                           (SELECT G.CATGROUP_ID, R.CATALOG_ID, R.CATGROUP_ID_PARENT\n                              FROM CATGRPREL R, CATGROUP G\n                             WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID_CHILD = G.CATGROUP_ID AND G.MARKFORDELETE = 0\n                            UNION\n                           SELECT G.CATGROUP_ID, R.CATALOG_ID, ${function.long.null}\n                             FROM CATTOGRP R, CATGROUP G\n                            WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID = G.CATGROUP_ID AND G.MARKFORDELETE = 0) H\n                      WHERE P.CATALOG_ID = H.CATALOG_ID AND P.CATGROUP_ID = H.CATGROUP_ID\n                        AND P.CATENTRY_ID = C.CATENTRY_ID ${extCatgroupAndSQL1a}) I\n            LEFT JOIN FACETCATGRP FCG2 ON  FCG2.CATGROUP_ID = I.CATGROUP_ID\n\t\t    ${TI_DELTA_CG_FACET_JOIN_QUERY}\n            ${X_CUSTOM_CG_FACET_JOIN_QUERY}\n     WHERE I.ATTR_ID = A.ATTR_ID AND A.ATTR_ID = F.ATTR_ID AND A.FACETABLE = 1\n       AND F.STOREENT_ID IN\n           (SELECT RELATEDSTORE_ID FROM STOREREL WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId})\n\t\t UNION \n\t\t   SELECT ${param.catalogId} AS CATALOG_ID,\n           C.CATGROUP_ID, \n\t\t   ('facet' || TO_CHAR(SA.SRCHATTR_ID)) NAME,\n\t\t   SA.SRCHATTR_ID ATTR_ID,\n\t\t   ('facet' || TO_CHAR(SA.SRCHATTR_ID)) IDENTIFIER,\n           F.MAX_DISPLAY MAX_DISPLAY,\n\t\t   F.SELECTION  SELECTION,\n           F.FACET_ID  FACET_ID,\n           F.SORT_ORDER  SORT_ORDER,\n           F.ZERO_DISPLAY  ZERO_DISPLAY,\n           F.SEQUENCE SEQUENCE,\n           (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n           F.KEYWORD_SEARCH  KEYWORD_SEARCH,\n           1 AS  FACETABLE,\n           0 AS  SWATCHABLE,\n\t\t   0 AS STOREDISPLAY\n\t\t   FROM SRCHATTR SA,  FACET F,  (SELECT G.CATGROUP_ID, R.CATALOG_ID\n                              FROM CATGRPREL R, CATGROUP G\n                             WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID_CHILD = G.CATGROUP_ID AND G.MARKFORDELETE = 0\n                            UNION\n                           SELECT G.CATGROUP_ID, R.CATALOG_ID\n                             FROM CATTOGRP R, CATGROUP G\n                            WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID = G.CATGROUP_ID AND G.MARKFORDELETE = 0) H,\n                              CATGROUP C\n\t\t   ${TI_DELTA_CG_JOIN_QUERY}\n           ${X_CUSTOM_CG_JOIN_QUERY}\n\t\t    WHERE SA.SRCHATTR_ID = F.SRCHATTR_ID AND SA.SRCHATTR_ID IN (-1002, -1013, -1101) AND H.CATALOG_ID = ${param.catalogId} \n\t\t       AND C.CATGROUP_ID = H.CATGROUP_ID\n\t\t  ${extCatgroupAndSQL} \n\t\t  UNION\n\t\t  SELECT \n\t\t${param.catalogId} AS CATALOG_ID, \n\t\tFCG3.CATGROUP_ID,\n\t\tATD.NAME AS NAME,\n\t\tA.ATTR_ID AS ATTR_ID,\n\t\tA.IDENTIFIER AS IDENTIFIER,\n\t\tF.MAX_DISPLAY AS MAX_DISPLAY,\n\t\tF.SELECTION AS SELECTION,\n\t\tF.FACET_ID AS FACET_ID, \n\t\tF.SORT_ORDER AS SORT_ORDER,\n\t\tF.ZERO_DISPLAY AS ZERO_DISPLAY,\n\t\tCOALESCE(FCG3.SEQUENCE, A.SEQUENCE) AS SEQUENCE,\n\t\t(CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n\t\tF.KEYWORD_SEARCH AS KEYWORD_SEARCH,\n\t\tA.FACETABLE AS FACETABLE,\n\t\tA.SWATCHABLE AS SWATCHABLE,\n\t\t(CASE WHEN A.STOREDISPLAY IS NOT NULL THEN A.STOREDISPLAY ELSE 0 END) AS  STOREDISPLAY\n\t\tFROM FACETCATGRP FCG3 JOIN FACET F ON F.FACET_ID = FCG3.FACET_ID\n\t\tJOIN ATTR A ON A.ATTR_ID = F.ATTR_ID \n\t\tJOIN ATTRDESC ATD ON A.ATTR_ID  = ATD.ATTR_ID \n\t\tWHERE \n\t\tATD.LANGUAGE_ID = ${param.langId} AND 'true' = (SELECT LOWER(D.CONTENT) FROM EMSPOT E, DMEMSPOTDEF D, STOREREL R WHERE \n\t\tR.RELATEDSTORE_ID = E.STOREENT_ID AND R.STATE = 1 AND R.STRELTYP_ID = -11 AND R.STORE_ID = ${param.storeId} AND \n\t\tR.STORE_ID= D.STOREENT_ID AND E.USAGETYPE = 'STOREFEATURE' AND E.EMSPOT_ID = D.EMSPOT_ID AND D.CONTENTTYPE = 'FeatureEnabled' AND E.NAME= 'ExpandedCategoryNavigation')\n\t\tAND FCG3.STOREENT_ID IN (SELECT RELATEDSTORE_ID FROM STOREREL WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId})) AF\n        LEFT JOIN FACETCATGRP FCG ON FCG.FACET_ID = AF.FACET_ID AND FCG.STOREENT_ID = ${param.storeId} AND FCG.CATGROUP_ID = AF.CATGROUP_ID\n     ${function.group}\n     ORDER BY AF.CATALOG_ID, AF.CATGROUP_ID",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "1195761e-3951-3a91-a4d3-f012e3bbe9ab",
                "instanceIdentifier" : "6774cc91-c653-3273-4f96-0b88b5ccf52c",
                "name" : "Find Facets SQL - LISTAGG",
                "type" : "PROCESSOR"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "3d94db85-2819-39cd-a48f-000c1c74c528",
              "instanceIdentifier" : "d80d45a0-2c8e-386a-a40f-e6f0df6fd4ef",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "LISTAGG" ],
              "source" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "0ccc39b2-9f24-356f-8020-2e79bb2cc8e0",
                "instanceIdentifier" : "1a50db44-6642-3668-a8ca-2534f8cb579b",
                "name" : "Route on LISTAGG",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "0ccc39b2-9f24-356f-8020-2e79bb2cc8e0",
                "instanceIdentifier" : "1a50db44-6642-3668-a8ca-2534f8cb579b",
                "name" : "Route on LISTAGG",
                "type" : "PROCESSOR"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "9c446843-4416-3bc1-b97c-48a5950d7857",
              "instanceIdentifier" : "a84e929c-7fa9-3b8e-3867-965edf9094a5",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "success" ],
              "source" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "ba2fefe8-f406-3fac-a49f-e58c69fb645f",
                "instanceIdentifier" : "73249a8c-8e86-3ac1-546a-50a37b15894c",
                "name" : "Set LISTAGG",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "f511250b-fc90-3075-9e88-07096e7f6ba1",
                "instanceIdentifier" : "4ea573b0-e64c-3e0b-676b-570e50ebf8f4",
                "name" : "Funnel",
                "type" : "FUNNEL"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "d7779497-222d-3c71-86f0-a6fcfb5a1824",
              "instanceIdentifier" : "c4ac83de-d61c-354f-b0f8-962eab500815",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "failure" ],
              "source" : {
                "comments" : "        SELECT AF.CATGROUP_ID, \n           AF.NAME NAME,\n           AF.LANGUAGE_ID LANGUAGE_ID,\n           AF.ATTR_ID ATTR_ID,\n           AF.IDENTIFIER IDENTIFIER,\n           AF.MAX_DISPLAY MAX_DISPLAY,\n           AF.SELECTION SELECTION,\n\t\t   AF.SEQUENCE SEQUENCE,\n           AF.FACET_ID FACET_ID,\n           AF.SORT_ORDER SORT_ORDER,\n           AF.ZERO_DISPLAY ZERO_DISPLAY,\n           AF.GROUP_ID GROUP_ID,\n           AF.KEYWORD_SEARCH KEYWORD_SEARCH,\n           AF.FACETABLE FACETABLE,\n           AF.SWATCHABLE SWATCHABLE,\n           AF.STOREDISPLAY STOREDISPLAY,\n\t\t   FCG.SEQUENCE FCG_SEQUENCE,\n\t\t   FCG.DISPLAYABLE FCG_DISPLAYABLE,\n\t\t   FCG.STOREENT_ID FCG_STOREENT_ID\n     FROM (\n     \t       SELECT I.CATGROUP_ID, I.NAME AS NAME, TO_CHAR(I.LANGUAGE_ID) LANGUAGE_ID, I.ATTR_ID  ATTR_ID, I.IDENTIFIER IDENTIFIER, F.MAX_DISPLAY  MAX_DISPLAY, F.SELECTION  SELECTION, F.FACET_ID FACET_ID, F.SORT_ORDER  SORT_ORDER, F.ZERO_DISPLAY  ZERO_DISPLAY,\n                  F.SEQUENCE SEQUENCE, (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID, F.KEYWORD_SEARCH  KEYWORD_SEARCH, I.FACETABLE FACETABLE, I.SWATCHABLE  SWATCHABLE,\n                  (CASE WHEN I.STOREDISPLAY IS NOT NULL THEN I.STOREDISPLAY ELSE 0 END) AS STOREDISPLAY\n               FROM FACET F,\n                  (SELECT DISTINCT P.CATGROUP_ID, A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, D.NAME, D.LANGUAGE_ID \n                   FROM CATGPENREL P, CATENTRYATTR C, ATTR A\n\t\t           LEFT JOIN ATTRDESC D ON D.ATTR_ID = A.ATTR_ID AND D.LANGUAGE_ID IN (${supported.language})\n                   WHERE P.CATGROUP_ID IN (${data.catgroupId}) AND C.ATTR_ID = A.ATTR_ID AND A.FACETABLE  = 1 \n                       AND P.CATENTRY_ID = C.CATENTRY_ID\n                    UNION SELECT FCG.CATGROUP_ID, A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, ATD.NAME, ATD.LANGUAGE_ID FROM FACETCATGRP FCG\n\t\t\t\t\tJOIN FACET F ON F.FACET_ID = FCG.FACET_ID\n                    JOIN ATTR A ON A.ATTR_ID = F.ATTR_ID JOIN ATTRDESC ATD ON A.ATTR_ID  = ATD.ATTR_ID WHERE ATD.LANGUAGE_ID IN (${supported.language})) I\n                       LEFT JOIN FACETCATGRP FCG2 ON FCG2.CATGROUP_ID = I.CATGROUP_ID\n                       ${X_CUSTOM_CG_FACET_JOIN_QUERY}\n                WHERE I.ATTR_ID = F.ATTR_ID AND F.STOREENT_ID IN (${param.allStoreIds})\n\t\t   UNION \n\t\t        SELECT H.CATGROUP_ID, ('facet' || TO_CHAR(SA.SRCHATTR_ID)) NAME, ' ' AS LANGUAGE_ID, SA.SRCHATTR_ID ATTR_ID, ('facet' || TO_CHAR(SA.SRCHATTR_ID)) IDENTIFIER, F.MAX_DISPLAY MAX_DISPLAY, F.SELECTION  SELECTION, F.FACET_ID  FACET_ID, \n\t\t           F.SORT_ORDER SORT_ORDER, F.ZERO_DISPLAY  ZERO_DISPLAY, F.SEQUENCE SEQUENCE, (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID, F.KEYWORD_SEARCH  KEYWORD_SEARCH, 1 AS  FACETABLE, 0 AS  SWATCHABLE, 0 AS STOREDISPLAY\n\t\t        FROM SRCHATTR SA, FACET F, CATGROUP H\n\t\t       WHERE SA.SRCHATTR_ID = F.SRCHATTR_ID AND SA.SRCHATTR_ID IN (-1002, -1013, -1101) AND CATGROUP_ID IN (${data.catgroupId})\n\t\t  ) AF\n        LEFT JOIN FACETCATGRP FCG ON FCG.FACET_ID = AF.FACET_ID AND FCG.STOREENT_ID IN (${param.allStoreIds}) AND FCG.CATGROUP_ID = AF.CATGROUP_ID\n     ORDER BY AF.CATGROUP_ID, AF.ATTR_ID",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "4c28674b-9e74-372e-8309-ea05d15e07ea",
                "instanceIdentifier" : "835f3585-1faf-3bd7-2425-5b1a690d6939",
                "name" : "Find Facets SQL",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "df254618-149b-32f7-8838-1d36fecee3b9",
                "instanceIdentifier" : "3d8bb61a-1c3d-34cc-6532-b679291969d7",
                "name" : "ERROR",
                "type" : "OUTPUT_PORT"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "63bb25a6-684e-368c-a993-9a257bc702ea",
              "instanceIdentifier" : "ade974e9-537c-3c22-6f3a-634ff7b6773a",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "" ],
              "source" : {
                "comments" : "",
                "groupId" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
                "id" : "d868c220-fbb5-30d6-b653-fcf198981d44",
                "instanceIdentifier" : "849288b9-40d8-3a22-55e4-7ae4f66d850e",
                "name" : "Funnel",
                "type" : "FUNNEL"
              },
              "zIndex" : 0
            } ],
            "controllerServices" : [ ],
            "defaultBackPressureDataSizeThreshold" : "1 GB",
            "defaultBackPressureObjectThreshold" : 10000,
            "defaultFlowFileExpiration" : "0 sec",
            "flowFileConcurrency" : "UNBOUNDED",
            "flowFileOutboundPolicy" : "STREAM_WHEN_AVAILABLE",
            "funnels" : [ {
              "componentType" : "FUNNEL",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "d868c220-fbb5-30d6-b653-fcf198981d44",
              "instanceIdentifier" : "849288b9-40d8-3a22-55e4-7ae4f66d850e",
              "position" : {
                "x" : -608.0,
                "y" : 648.0
              }
            }, {
              "componentType" : "FUNNEL",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "f511250b-fc90-3075-9e88-07096e7f6ba1",
              "instanceIdentifier" : "4ea573b0-e64c-3e0b-676b-570e50ebf8f4",
              "position" : {
                "x" : -1200.0,
                "y" : 648.0
              }
            }, {
              "componentType" : "FUNNEL",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "88356737-528b-37d4-ac1e-0d9634ee3689",
              "instanceIdentifier" : "bfed7e61-3d00-333e-dac2-f4e3fc2f2726",
              "position" : {
                "x" : -3600.0,
                "y" : 624.0
              }
            } ],
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
            "inputPorts" : [ {
              "allowRemoteAccess" : false,
              "comments" : "",
              "componentType" : "INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "a8b09196-ff57-3afc-be7c-6cbd7aa26b56",
              "instanceIdentifier" : "fb2f18a2-5fed-3b45-fad6-8d5ab3523c33",
              "name" : "INPUT",
              "position" : {
                "x" : -4328.0,
                "y" : 336.0
              },
              "scheduledState" : "ENABLED",
              "type" : "INPUT_PORT"
            } ],
            "instanceIdentifier" : "3dd76476-f488-3ab2-e48e-6247484ea0b5",
            "labels" : [ {
              "componentType" : "LABEL",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "height" : 696.0,
              "identifier" : "6803a549-6152-3b54-bcf1-e67e1d96127a",
              "instanceIdentifier" : "05c8dd35-b407-35a6-f3bb-669df5d9a215",
              "label" : "Find Facets for Category from Database",
              "position" : {
                "x" : -4200.0,
                "y" : 64.0
              },
              "style" : {
                "background-color" : "#d4ffe7",
                "font-size" : "20px"
              },
              "width" : 4920.0,
              "zIndex" : 0
            } ],
            "name" : "Find Facets for Category from Database",
            "outputPorts" : [ {
              "allowRemoteAccess" : false,
              "comments" : "",
              "componentType" : "OUTPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "df254618-149b-32f7-8838-1d36fecee3b9",
              "instanceIdentifier" : "3d8bb61a-1c3d-34cc-6532-b679291969d7",
              "name" : "ERROR",
              "position" : {
                "x" : 592.0,
                "y" : 640.0
              },
              "scheduledState" : "ENABLED",
              "type" : "OUTPUT_PORT"
            }, {
              "allowRemoteAccess" : false,
              "comments" : "",
              "componentType" : "OUTPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "b20dcc17-0d6b-35b8-a896-cae9dbc04480",
              "instanceIdentifier" : "b9cf7fc4-936d-38b9-3875-646506b0ad1d",
              "name" : "SUCCESS",
              "position" : {
                "x" : 592.0,
                "y" : 320.0
              },
              "scheduledState" : "ENABLED",
              "type" : "OUTPUT_PORT"
            } ],
            "position" : {
              "x" : 2544.0,
              "y" : 336.0
            },
            "processGroups" : [ {
              "comments" : "",
              "componentType" : "PROCESS_GROUP",
              "connections" : [ {
                "backPressureDataSizeThreshold" : "1 GB",
                "backPressureObjectThreshold" : 10000,
                "bends" : [ ],
                "componentType" : "CONNECTION",
                "destination" : {
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "ee382eca-470b-340d-a3ab-3dae66081497",
                  "instanceIdentifier" : "bddb4201-bd93-3e39-ecc0-64cf6c2ed8ef",
                  "name" : "OUTPUT",
                  "type" : "OUTPUT_PORT"
                },
                "flowFileExpiration" : "0 sec",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "9e06b6d4-4600-36ae-a0e4-bf665f48c7d1",
                "instanceIdentifier" : "d1897a58-4e3d-3697-6e9a-655b731add66",
                "labelIndex" : 1,
                "loadBalanceCompression" : "DO_NOT_COMPRESS",
                "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
                "name" : "",
                "partitioningAttribute" : "",
                "prioritizers" : [ ],
                "selectedRelationships" : [ "" ],
                "source" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "5766d1db-ecc5-3da6-9587-549eaeaee8f2",
                  "instanceIdentifier" : "68f97180-92b5-3ded-f0d5-5c64151648bb",
                  "name" : "Funnel",
                  "type" : "FUNNEL"
                },
                "zIndex" : 0
              }, {
                "backPressureDataSizeThreshold" : "1 GB",
                "backPressureObjectThreshold" : 10000,
                "bends" : [ ],
                "componentType" : "CONNECTION",
                "destination" : {
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "c6bc695f-8385-3f62-9cf8-6ef3a7bc7adf",
                  "instanceIdentifier" : "195229c6-8ce9-391f-d86f-ee6a1bf3818b",
                  "name" : "ERROR",
                  "type" : "OUTPUT_PORT"
                },
                "flowFileExpiration" : "0 sec",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "be8b0d96-c7fb-3349-a0dd-abfab41e5ec0",
                "instanceIdentifier" : "ade0ee2e-091b-3fb3-c447-29e5b7325906",
                "labelIndex" : 1,
                "loadBalanceCompression" : "DO_NOT_COMPRESS",
                "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
                "name" : "",
                "partitioningAttribute" : "",
                "prioritizers" : [ ],
                "selectedRelationships" : [ "success" ],
                "source" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "5dfeeb9d-2547-328e-b201-3702ed9039f0",
                  "instanceIdentifier" : "2fd3d7dd-b9bf-3aa8-f740-b49dc2886b3f",
                  "name" : "Reset Store Id",
                  "type" : "PROCESSOR"
                },
                "zIndex" : 0
              }, {
                "backPressureDataSizeThreshold" : "1 GB",
                "backPressureObjectThreshold" : 10000,
                "bends" : [ ],
                "componentType" : "CONNECTION",
                "destination" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "192cc90c-2438-3be1-9a79-4f5e003c322a",
                  "instanceIdentifier" : "89cf5396-a468-399c-4756-033cd6636c3e",
                  "name" : "Set Original StoreId",
                  "type" : "PROCESSOR"
                },
                "flowFileExpiration" : "0 sec",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "61b1ee5d-199c-3bc9-af7d-6de0fe3d4f5b",
                "instanceIdentifier" : "3fac92db-d423-387d-a210-4b38bd0cd278",
                "labelIndex" : 1,
                "loadBalanceCompression" : "DO_NOT_COMPRESS",
                "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
                "name" : "",
                "partitioningAttribute" : "",
                "prioritizers" : [ ],
                "selectedRelationships" : [ "nrt" ],
                "source" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "0c91eeb9-a217-316c-b405-3948361d935d",
                  "instanceIdentifier" : "d201c8a7-2671-3371-1702-0732c455206b",
                  "name" : "Route On NRT",
                  "type" : "PROCESSOR"
                },
                "zIndex" : 0
              }, {
                "backPressureDataSizeThreshold" : "1 GB",
                "backPressureObjectThreshold" : 10000,
                "bends" : [ ],
                "componentType" : "CONNECTION",
                "destination" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "944d9f58-d363-3a42-971d-91ffe77ef198",
                  "instanceIdentifier" : "1e6a35a0-7cbd-360d-ee6c-0d0579e8e6d7",
                  "name" : "Reset Store Id",
                  "type" : "PROCESSOR"
                },
                "flowFileExpiration" : "0 sec",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "bec23a2f-46ee-323f-8b1a-c173dd5b2867",
                "instanceIdentifier" : "da1bc986-6c03-39f8-e47d-5631104cef9d",
                "labelIndex" : 1,
                "loadBalanceCompression" : "DO_NOT_COMPRESS",
                "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
                "name" : "",
                "partitioningAttribute" : "",
                "prioritizers" : [ ],
                "selectedRelationships" : [ "success" ],
                "source" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "08071d9b-2c5c-3b15-b5c4-7a50b1bb42aa",
                  "instanceIdentifier" : "5a6f56e6-104b-31e0-0546-ec4e585f79f3",
                  "name" : "Resolve Store Context By Asset Store",
                  "type" : "PROCESSOR"
                },
                "zIndex" : 0
              }, {
                "backPressureDataSizeThreshold" : "1 GB",
                "backPressureObjectThreshold" : 10000,
                "bends" : [ ],
                "componentType" : "CONNECTION",
                "destination" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "5dfeeb9d-2547-328e-b201-3702ed9039f0",
                  "instanceIdentifier" : "2fd3d7dd-b9bf-3aa8-f740-b49dc2886b3f",
                  "name" : "Reset Store Id",
                  "type" : "PROCESSOR"
                },
                "flowFileExpiration" : "0 sec",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "bdba402c-2087-367b-bd74-f53e87c1acf5",
                "instanceIdentifier" : "066f1721-70ab-3c86-bdb8-e9a98d3f3018",
                "labelIndex" : 1,
                "loadBalanceCompression" : "DO_NOT_COMPRESS",
                "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
                "name" : "",
                "partitioningAttribute" : "",
                "prioritizers" : [ ],
                "selectedRelationships" : [ "failure" ],
                "source" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "08071d9b-2c5c-3b15-b5c4-7a50b1bb42aa",
                  "instanceIdentifier" : "5a6f56e6-104b-31e0-0546-ec4e585f79f3",
                  "name" : "Resolve Store Context By Asset Store",
                  "type" : "PROCESSOR"
                },
                "zIndex" : 0
              }, {
                "backPressureDataSizeThreshold" : "1 GB",
                "backPressureObjectThreshold" : 10000,
                "bends" : [ ],
                "componentType" : "CONNECTION",
                "destination" : {
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "ee382eca-470b-340d-a3ab-3dae66081497",
                  "instanceIdentifier" : "bddb4201-bd93-3e39-ecc0-64cf6c2ed8ef",
                  "name" : "OUTPUT",
                  "type" : "OUTPUT_PORT"
                },
                "flowFileExpiration" : "0 sec",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "79d5d1cf-87c2-3edd-8f36-a54187ad82d1",
                "instanceIdentifier" : "0569941b-0847-36af-58f2-3d1f64fdf6de",
                "labelIndex" : 1,
                "loadBalanceCompression" : "DO_NOT_COMPRESS",
                "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
                "name" : "",
                "partitioningAttribute" : "",
                "prioritizers" : [ ],
                "selectedRelationships" : [ "success" ],
                "source" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "944d9f58-d363-3a42-971d-91ffe77ef198",
                  "instanceIdentifier" : "1e6a35a0-7cbd-360d-ee6c-0d0579e8e6d7",
                  "name" : "Reset Store Id",
                  "type" : "PROCESSOR"
                },
                "zIndex" : 0
              }, {
                "backPressureDataSizeThreshold" : "1 GB",
                "backPressureObjectThreshold" : 10000,
                "bends" : [ ],
                "componentType" : "CONNECTION",
                "destination" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "08071d9b-2c5c-3b15-b5c4-7a50b1bb42aa",
                  "instanceIdentifier" : "5a6f56e6-104b-31e0-0546-ec4e585f79f3",
                  "name" : "Resolve Store Context By Asset Store",
                  "type" : "PROCESSOR"
                },
                "flowFileExpiration" : "0 sec",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "0290cb9e-df7e-3cc9-bdd8-8cb232e8ac10",
                "instanceIdentifier" : "af237d92-2461-3bf9-1288-ec8fb8873709",
                "labelIndex" : 1,
                "loadBalanceCompression" : "DO_NOT_COMPRESS",
                "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
                "name" : "",
                "partitioningAttribute" : "",
                "prioritizers" : [ ],
                "selectedRelationships" : [ "success" ],
                "source" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "192cc90c-2438-3be1-9a79-4f5e003c322a",
                  "instanceIdentifier" : "89cf5396-a468-399c-4756-033cd6636c3e",
                  "name" : "Set Original StoreId",
                  "type" : "PROCESSOR"
                },
                "zIndex" : 0
              }, {
                "backPressureDataSizeThreshold" : "1 GB",
                "backPressureObjectThreshold" : 10000,
                "bends" : [ ],
                "componentType" : "CONNECTION",
                "destination" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "5766d1db-ecc5-3da6-9587-549eaeaee8f2",
                  "instanceIdentifier" : "68f97180-92b5-3ded-f0d5-5c64151648bb",
                  "name" : "Funnel",
                  "type" : "FUNNEL"
                },
                "flowFileExpiration" : "0 sec",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "2f98102f-cd8e-393d-a2ba-0e48b3d7ca14",
                "instanceIdentifier" : "d9d5af1c-9b0c-3c09-7793-0ee59b259548",
                "labelIndex" : 1,
                "loadBalanceCompression" : "DO_NOT_COMPRESS",
                "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
                "name" : "",
                "partitioningAttribute" : "",
                "prioritizers" : [ ],
                "selectedRelationships" : [ "" ],
                "source" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "e484ee67-8bd0-36b6-9d68-7c48f4cbc1c1",
                  "instanceIdentifier" : "b1250af0-1926-3529-80bf-b0780d3e2b8c",
                  "name" : "Funnel",
                  "type" : "FUNNEL"
                },
                "zIndex" : 0
              }, {
                "backPressureDataSizeThreshold" : "1 GB",
                "backPressureObjectThreshold" : 10000,
                "bends" : [ ],
                "componentType" : "CONNECTION",
                "destination" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "0c91eeb9-a217-316c-b405-3948361d935d",
                  "instanceIdentifier" : "d201c8a7-2671-3371-1702-0732c455206b",
                  "name" : "Route On NRT",
                  "type" : "PROCESSOR"
                },
                "flowFileExpiration" : "0 sec",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "cd42df58-e6fd-3287-95ea-37abbe467794",
                "instanceIdentifier" : "5d32f44a-c9ef-336b-2b80-56d5a50cee86",
                "labelIndex" : 1,
                "loadBalanceCompression" : "DO_NOT_COMPRESS",
                "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
                "name" : "",
                "partitioningAttribute" : "",
                "prioritizers" : [ ],
                "selectedRelationships" : [ "" ],
                "source" : {
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "28bf8d80-1e7b-32c7-8dac-161dd050e448",
                  "instanceIdentifier" : "69a43fe9-2f45-356b-1e96-a6abb9df9389",
                  "name" : "INPUT",
                  "type" : "INPUT_PORT"
                },
                "zIndex" : 0
              }, {
                "backPressureDataSizeThreshold" : "1 GB",
                "backPressureObjectThreshold" : 10000,
                "bends" : [ ],
                "componentType" : "CONNECTION",
                "destination" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "e484ee67-8bd0-36b6-9d68-7c48f4cbc1c1",
                  "instanceIdentifier" : "b1250af0-1926-3529-80bf-b0780d3e2b8c",
                  "name" : "Funnel",
                  "type" : "FUNNEL"
                },
                "flowFileExpiration" : "0 sec",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "4c106a7d-1bf6-3b60-9d1a-ad174364ee91",
                "instanceIdentifier" : "16a69f76-a5fb-3c78-13c2-96c0da64c39f",
                "labelIndex" : 1,
                "loadBalanceCompression" : "DO_NOT_COMPRESS",
                "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
                "name" : "",
                "partitioningAttribute" : "",
                "prioritizers" : [ ],
                "selectedRelationships" : [ "unmatched" ],
                "source" : {
                  "comments" : "",
                  "groupId" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                  "id" : "0c91eeb9-a217-316c-b405-3948361d935d",
                  "instanceIdentifier" : "d201c8a7-2671-3371-1702-0732c455206b",
                  "name" : "Route On NRT",
                  "type" : "PROCESSOR"
                },
                "zIndex" : 0
              } ],
              "controllerServices" : [ ],
              "defaultBackPressureDataSizeThreshold" : "1 GB",
              "defaultBackPressureObjectThreshold" : 10000,
              "defaultFlowFileExpiration" : "0 sec",
              "flowFileConcurrency" : "UNBOUNDED",
              "flowFileOutboundPolicy" : "STREAM_WHEN_AVAILABLE",
              "funnels" : [ {
                "componentType" : "FUNNEL",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "5766d1db-ecc5-3da6-9587-549eaeaee8f2",
                "instanceIdentifier" : "68f97180-92b5-3ded-f0d5-5c64151648bb",
                "position" : {
                  "x" : 2608.0,
                  "y" : 24.0
                }
              }, {
                "componentType" : "FUNNEL",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "e484ee67-8bd0-36b6-9d68-7c48f4cbc1c1",
                "instanceIdentifier" : "b1250af0-1926-3529-80bf-b0780d3e2b8c",
                "position" : {
                  "x" : 696.0,
                  "y" : 24.0
                }
              } ],
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
              "inputPorts" : [ {
                "allowRemoteAccess" : false,
                "componentType" : "INPUT_PORT",
                "concurrentlySchedulableTaskCount" : 1,
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "28bf8d80-1e7b-32c7-8dac-161dd050e448",
                "instanceIdentifier" : "69a43fe9-2f45-356b-1e96-a6abb9df9389",
                "name" : "INPUT",
                "position" : {
                  "x" : 0.0,
                  "y" : 264.0
                },
                "scheduledState" : "ENABLED",
                "type" : "INPUT_PORT"
              } ],
              "instanceIdentifier" : "09d0e522-cdb5-3b8e-6ad3-6002131d63dc",
              "labels" : [ {
                "componentType" : "LABEL",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "height" : 632.0,
                "identifier" : "af611e95-1a09-3a80-b392-8edab5204074",
                "instanceIdentifier" : "e9e64c67-0488-3bf7-b12c-ad7e85db2477",
                "label" : "Get All Store Id",
                "position" : {
                  "x" : 128.0,
                  "y" : -24.0
                },
                "style" : {
                  "background-color" : "#d4ffe7",
                  "font-size" : "20px"
                },
                "width" : 3208.0,
                "zIndex" : 0
              } ],
              "name" : "Get All Store Id",
              "outputPorts" : [ {
                "allowRemoteAccess" : false,
                "componentType" : "OUTPUT_PORT",
                "concurrentlySchedulableTaskCount" : 1,
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "ee382eca-470b-340d-a3ab-3dae66081497",
                "instanceIdentifier" : "bddb4201-bd93-3e39-ecc0-64cf6c2ed8ef",
                "name" : "OUTPUT",
                "position" : {
                  "x" : 3200.0,
                  "y" : 200.0
                },
                "scheduledState" : "ENABLED",
                "type" : "OUTPUT_PORT"
              }, {
                "allowRemoteAccess" : false,
                "componentType" : "OUTPUT_PORT",
                "concurrentlySchedulableTaskCount" : 1,
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "c6bc695f-8385-3f62-9cf8-6ef3a7bc7adf",
                "instanceIdentifier" : "195229c6-8ce9-391f-d86f-ee6a1bf3818b",
                "name" : "ERROR",
                "position" : {
                  "x" : 3176.0,
                  "y" : 408.0
                },
                "scheduledState" : "ENABLED",
                "type" : "OUTPUT_PORT"
              } ],
              "position" : {
                "x" : -3768.0,
                "y" : 272.0
              },
              "processGroups" : [ ],
              "processors" : [ {
                "autoTerminatedRelationships" : [ "original" ],
                "backoffMechanism" : "PENALIZE_FLOWFILE",
                "bulletinLevel" : "WARN",
                "bundle" : {
                  "artifact" : "commerce-search-processors-nar",
                  "group" : "com.hcl.commerce",
                  "version" : "9.1.16.0"
                },
                "comments" : "",
                "componentType" : "PROCESSOR",
                "concurrentlySchedulableTaskCount" : 1,
                "executionNode" : "ALL",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "08071d9b-2c5c-3b15-b5c4-7a50b1bb42aa",
                "instanceIdentifier" : "5a6f56e6-104b-31e0-0546-ec4e585f79f3",
                "maxBackoffPeriod" : "10 mins",
                "name" : "Resolve Store Context By Asset Store",
                "penaltyDuration" : "0 sec",
                "position" : {
                  "x" : 1792.0,
                  "y" : 224.0
                },
                "properties" : {
                  "Store Service" : "45ab14cb-fe83-3a33-ba69-a2f1f47309d5"
                },
                "propertyDescriptors" : {
                  "Store Service" : {
                    "displayName" : "Store Service",
                    "identifiesControllerService" : true,
                    "name" : "Store Service",
                    "sensitive" : false
                  }
                },
                "retriedRelationships" : [ ],
                "retryCount" : 10,
                "runDurationMillis" : 0,
                "scheduledState" : "ENABLED",
                "schedulingPeriod" : "0 sec",
                "schedulingStrategy" : "TIMER_DRIVEN",
                "style" : { },
                "type" : "com.hcl.software.data.ingest.link.processors.ResolveStoreContextByAssetStore",
                "yieldDuration" : "1 sec"
              }, {
                "autoTerminatedRelationships" : [ ],
                "backoffMechanism" : "PENALIZE_FLOWFILE",
                "bulletinLevel" : "WARN",
                "bundle" : {
                  "artifact" : "nifi-update-attribute-nar",
                  "group" : "org.apache.nifi",
                  "version" : "1.22.0"
                },
                "comments" : "",
                "componentType" : "PROCESSOR",
                "concurrentlySchedulableTaskCount" : 1,
                "executionNode" : "ALL",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "192cc90c-2438-3be1-9a79-4f5e003c322a",
                "instanceIdentifier" : "89cf5396-a468-399c-4756-033cd6636c3e",
                "maxBackoffPeriod" : "10 mins",
                "name" : "Set Original StoreId",
                "penaltyDuration" : "0 sec",
                "position" : {
                  "x" : 1168.0,
                  "y" : 224.0
                },
                "properties" : {
                  "Store State" : "Do not store state",
                  "canonical-value-lookup-cache-size" : "100",
                  "param.original.storeId" : "${param.storeId}",
                  "param.storeId" : "${param.assetStoreId}"
                },
                "propertyDescriptors" : {
                  "Delete Attributes Expression" : {
                    "displayName" : "Delete Attributes Expression",
                    "identifiesControllerService" : false,
                    "name" : "Delete Attributes Expression",
                    "sensitive" : false
                  },
                  "Store State" : {
                    "displayName" : "Store State",
                    "identifiesControllerService" : false,
                    "name" : "Store State",
                    "sensitive" : false
                  },
                  "canonical-value-lookup-cache-size" : {
                    "displayName" : "Cache Value Lookup Cache Size",
                    "identifiesControllerService" : false,
                    "name" : "canonical-value-lookup-cache-size",
                    "sensitive" : false
                  },
                  "param.original.storeId" : {
                    "displayName" : "param.original.storeId",
                    "identifiesControllerService" : false,
                    "name" : "param.original.storeId",
                    "sensitive" : false
                  },
                  "Stateful Variables Initial Value" : {
                    "displayName" : "Stateful Variables Initial Value",
                    "identifiesControllerService" : false,
                    "name" : "Stateful Variables Initial Value",
                    "sensitive" : false
                  },
                  "param.storeId" : {
                    "displayName" : "param.storeId",
                    "identifiesControllerService" : false,
                    "name" : "param.storeId",
                    "sensitive" : false
                  }
                },
                "retriedRelationships" : [ ],
                "retryCount" : 10,
                "runDurationMillis" : 0,
                "scheduledState" : "ENABLED",
                "schedulingPeriod" : "0 sec",
                "schedulingStrategy" : "TIMER_DRIVEN",
                "style" : { },
                "type" : "org.apache.nifi.processors.attributes.UpdateAttribute",
                "yieldDuration" : "1 sec"
              }, {
                "autoTerminatedRelationships" : [ ],
                "backoffMechanism" : "PENALIZE_FLOWFILE",
                "bulletinLevel" : "WARN",
                "bundle" : {
                  "artifact" : "nifi-standard-nar",
                  "group" : "org.apache.nifi",
                  "version" : "1.22.0"
                },
                "comments" : "",
                "componentType" : "PROCESSOR",
                "concurrentlySchedulableTaskCount" : 1,
                "executionNode" : "ALL",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "0c91eeb9-a217-316c-b405-3948361d935d",
                "instanceIdentifier" : "d201c8a7-2671-3371-1702-0732c455206b",
                "maxBackoffPeriod" : "10 mins",
                "name" : "Route On NRT",
                "penaltyDuration" : "0 sec",
                "position" : {
                  "x" : 544.0,
                  "y" : 224.0
                },
                "properties" : {
                  "nrt" : "${flow.NRT:equalsIgnoreCase('true')}",
                  "Routing Strategy" : "Route to Property name"
                },
                "propertyDescriptors" : {
                  "nrt" : {
                    "displayName" : "nrt",
                    "identifiesControllerService" : false,
                    "name" : "nrt",
                    "sensitive" : false
                  },
                  "Routing Strategy" : {
                    "displayName" : "Routing Strategy",
                    "identifiesControllerService" : false,
                    "name" : "Routing Strategy",
                    "sensitive" : false
                  }
                },
                "retriedRelationships" : [ ],
                "retryCount" : 10,
                "runDurationMillis" : 0,
                "scheduledState" : "ENABLED",
                "schedulingPeriod" : "0 sec",
                "schedulingStrategy" : "TIMER_DRIVEN",
                "style" : { },
                "type" : "org.apache.nifi.processors.standard.RouteOnAttribute",
                "yieldDuration" : "1 sec"
              }, {
                "autoTerminatedRelationships" : [ ],
                "backoffMechanism" : "PENALIZE_FLOWFILE",
                "bulletinLevel" : "WARN",
                "bundle" : {
                  "artifact" : "nifi-update-attribute-nar",
                  "group" : "org.apache.nifi",
                  "version" : "1.22.0"
                },
                "comments" : "",
                "componentType" : "PROCESSOR",
                "concurrentlySchedulableTaskCount" : 1,
                "executionNode" : "ALL",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "5dfeeb9d-2547-328e-b201-3702ed9039f0",
                "instanceIdentifier" : "2fd3d7dd-b9bf-3aa8-f740-b49dc2886b3f",
                "maxBackoffPeriod" : "10 mins",
                "name" : "Reset Store Id",
                "penaltyDuration" : "0 sec",
                "position" : {
                  "x" : 2472.0,
                  "y" : 376.0
                },
                "properties" : {
                  "Store State" : "Do not store state",
                  "canonical-value-lookup-cache-size" : "100",
                  "param.storeId" : "${param.original.storeId}"
                },
                "propertyDescriptors" : {
                  "Delete Attributes Expression" : {
                    "displayName" : "Delete Attributes Expression",
                    "identifiesControllerService" : false,
                    "name" : "Delete Attributes Expression",
                    "sensitive" : false
                  },
                  "Store State" : {
                    "displayName" : "Store State",
                    "identifiesControllerService" : false,
                    "name" : "Store State",
                    "sensitive" : false
                  },
                  "canonical-value-lookup-cache-size" : {
                    "displayName" : "Cache Value Lookup Cache Size",
                    "identifiesControllerService" : false,
                    "name" : "canonical-value-lookup-cache-size",
                    "sensitive" : false
                  },
                  "Stateful Variables Initial Value" : {
                    "displayName" : "Stateful Variables Initial Value",
                    "identifiesControllerService" : false,
                    "name" : "Stateful Variables Initial Value",
                    "sensitive" : false
                  },
                  "param.storeId" : {
                    "displayName" : "param.storeId",
                    "identifiesControllerService" : false,
                    "name" : "param.storeId",
                    "sensitive" : false
                  }
                },
                "retriedRelationships" : [ ],
                "retryCount" : 10,
                "runDurationMillis" : 0,
                "scheduledState" : "ENABLED",
                "schedulingPeriod" : "0 sec",
                "schedulingStrategy" : "TIMER_DRIVEN",
                "style" : { },
                "type" : "org.apache.nifi.processors.attributes.UpdateAttribute",
                "yieldDuration" : "1 sec"
              }, {
                "autoTerminatedRelationships" : [ ],
                "backoffMechanism" : "PENALIZE_FLOWFILE",
                "bulletinLevel" : "WARN",
                "bundle" : {
                  "artifact" : "nifi-update-attribute-nar",
                  "group" : "org.apache.nifi",
                  "version" : "1.22.0"
                },
                "comments" : "",
                "componentType" : "PROCESSOR",
                "concurrentlySchedulableTaskCount" : 1,
                "executionNode" : "ALL",
                "groupIdentifier" : "14caf896-9341-30ef-9a3d-20b3779e321f",
                "identifier" : "944d9f58-d363-3a42-971d-91ffe77ef198",
                "instanceIdentifier" : "1e6a35a0-7cbd-360d-ee6c-0d0579e8e6d7",
                "maxBackoffPeriod" : "10 mins",
                "name" : "Reset Store Id",
                "penaltyDuration" : "0 sec",
                "position" : {
                  "x" : 2472.0,
                  "y" : 160.0
                },
                "properties" : {
                  "Store State" : "Do not store state",
                  "canonical-value-lookup-cache-size" : "100",
                  "param.storeId" : "${param.original.storeId}"
                },
                "propertyDescriptors" : {
                  "Delete Attributes Expression" : {
                    "displayName" : "Delete Attributes Expression",
                    "identifiesControllerService" : false,
                    "name" : "Delete Attributes Expression",
                    "sensitive" : false
                  },
                  "Store State" : {
                    "displayName" : "Store State",
                    "identifiesControllerService" : false,
                    "name" : "Store State",
                    "sensitive" : false
                  },
                  "canonical-value-lookup-cache-size" : {
                    "displayName" : "Cache Value Lookup Cache Size",
                    "identifiesControllerService" : false,
                    "name" : "canonical-value-lookup-cache-size",
                    "sensitive" : false
                  },
                  "Stateful Variables Initial Value" : {
                    "displayName" : "Stateful Variables Initial Value",
                    "identifiesControllerService" : false,
                    "name" : "Stateful Variables Initial Value",
                    "sensitive" : false
                  },
                  "param.storeId" : {
                    "displayName" : "param.storeId",
                    "identifiesControllerService" : false,
                    "name" : "param.storeId",
                    "sensitive" : false
                  }
                },
                "retriedRelationships" : [ ],
                "retryCount" : 10,
                "runDurationMillis" : 0,
                "scheduledState" : "ENABLED",
                "schedulingPeriod" : "0 sec",
                "schedulingStrategy" : "TIMER_DRIVEN",
                "style" : { },
                "type" : "org.apache.nifi.processors.attributes.UpdateAttribute",
                "yieldDuration" : "1 sec"
              } ],
              "remoteProcessGroups" : [ ],
              "variables" : { }
            } ],
            "processors" : [ {
              "autoTerminatedRelationships" : [ ],
              "backoffMechanism" : "PENALIZE_FLOWFILE",
              "bulletinLevel" : "WARN",
              "bundle" : {
                "artifact" : "nifi-update-attribute-nar",
                "group" : "org.apache.nifi",
                "version" : "1.22.0"
              },
              "comments" : "",
              "componentType" : "PROCESSOR",
              "concurrentlySchedulableTaskCount" : 1,
              "executionNode" : "ALL",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "ba2fefe8-f406-3fac-a49f-e58c69fb645f",
              "instanceIdentifier" : "73249a8c-8e86-3ac1-546a-50a37b15894c",
              "maxBackoffPeriod" : "10 mins",
              "name" : "Set LISTAGG",
              "penaltyDuration" : "30 sec",
              "position" : {
                "x" : -3048.0,
                "y" : 296.0
              },
              "properties" : {
                "Store State" : "Do not store state",
                "canonical-value-lookup-cache-size" : "100",
                "listagg" : "${flow.database.listagg}"
              },
              "propertyDescriptors" : {
                "Delete Attributes Expression" : {
                  "displayName" : "Delete Attributes Expression",
                  "identifiesControllerService" : false,
                  "name" : "Delete Attributes Expression",
                  "sensitive" : false
                },
                "Store State" : {
                  "displayName" : "Store State",
                  "identifiesControllerService" : false,
                  "name" : "Store State",
                  "sensitive" : false
                },
                "canonical-value-lookup-cache-size" : {
                  "displayName" : "Cache Value Lookup Cache Size",
                  "identifiesControllerService" : false,
                  "name" : "canonical-value-lookup-cache-size",
                  "sensitive" : false
                },
                "listagg" : {
                  "displayName" : "listagg",
                  "identifiesControllerService" : false,
                  "name" : "listagg",
                  "sensitive" : false
                },
                "Stateful Variables Initial Value" : {
                  "displayName" : "Stateful Variables Initial Value",
                  "identifiesControllerService" : false,
                  "name" : "Stateful Variables Initial Value",
                  "sensitive" : false
                }
              },
              "retriedRelationships" : [ ],
              "retryCount" : 10,
              "runDurationMillis" : 25,
              "scheduledState" : "ENABLED",
              "schedulingPeriod" : "0 sec",
              "schedulingStrategy" : "TIMER_DRIVEN",
              "style" : { },
              "type" : "org.apache.nifi.processors.attributes.UpdateAttribute",
              "yieldDuration" : "1 sec"
            }, {
              "autoTerminatedRelationships" : [ ],
              "backoffMechanism" : "PENALIZE_FLOWFILE",
              "bulletinLevel" : "WARN",
              "bundle" : {
                "artifact" : "nifi-update-attribute-nar",
                "group" : "org.apache.nifi",
                "version" : "1.22.0"
              },
              "comments" : "",
              "componentType" : "PROCESSOR",
              "concurrentlySchedulableTaskCount" : 1,
              "executionNode" : "ALL",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "f803d01f-3c61-3745-ad06-ad65df813a78",
              "instanceIdentifier" : "ca81b1c8-b75f-3ba5-e7b9-c7366df80790",
              "maxBackoffPeriod" : "10 mins",
              "name" : "Clear Obsolete Attributes",
              "penaltyDuration" : "30 sec",
              "position" : {
                "x" : -40.0,
                "y" : 280.0
              },
              "properties" : {
                "Delete Attributes Expression" : "logger.*|executesql.*|fragment.*|DatabaseSQL|ingest.database.sql|Warning|listagg",
                "Store State" : "Do not store state",
                "canonical-value-lookup-cache-size" : "100"
              },
              "propertyDescriptors" : {
                "Delete Attributes Expression" : {
                  "displayName" : "Delete Attributes Expression",
                  "identifiesControllerService" : false,
                  "name" : "Delete Attributes Expression",
                  "sensitive" : false
                },
                "Store State" : {
                  "displayName" : "Store State",
                  "identifiesControllerService" : false,
                  "name" : "Store State",
                  "sensitive" : false
                },
                "canonical-value-lookup-cache-size" : {
                  "displayName" : "Cache Value Lookup Cache Size",
                  "identifiesControllerService" : false,
                  "name" : "canonical-value-lookup-cache-size",
                  "sensitive" : false
                },
                "Stateful Variables Initial Value" : {
                  "displayName" : "Stateful Variables Initial Value",
                  "identifiesControllerService" : false,
                  "name" : "Stateful Variables Initial Value",
                  "sensitive" : false
                }
              },
              "retriedRelationships" : [ ],
              "retryCount" : 10,
              "runDurationMillis" : 0,
              "scheduledState" : "ENABLED",
              "schedulingPeriod" : "0 sec",
              "schedulingStrategy" : "TIMER_DRIVEN",
              "style" : { },
              "type" : "org.apache.nifi.processors.attributes.UpdateAttribute",
              "yieldDuration" : "1 sec"
            }, {
              "autoTerminatedRelationships" : [ ],
              "backoffMechanism" : "PENALIZE_FLOWFILE",
              "bulletinLevel" : "NONE",
              "bundle" : {
                "artifact" : "nifi-standard-nar",
                "group" : "org.apache.nifi",
                "version" : "1.22.0"
              },
              "comments" : "",
              "componentType" : "PROCESSOR",
              "concurrentlySchedulableTaskCount" : 1,
              "executionNode" : "ALL",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "0ccc39b2-9f24-356f-8020-2e79bb2cc8e0",
              "instanceIdentifier" : "1a50db44-6642-3668-a8ca-2534f8cb579b",
              "maxBackoffPeriod" : "10 mins",
              "name" : "Route on LISTAGG",
              "penaltyDuration" : "0 sec",
              "position" : {
                "x" : -2400.0,
                "y" : 296.0
              },
              "properties" : {
                "Routing Strategy" : "Route to Property name",
                "LISTAGG" : "${listagg:equalsIgnoreCase('true')}"
              },
              "propertyDescriptors" : {
                "Routing Strategy" : {
                  "displayName" : "Routing Strategy",
                  "identifiesControllerService" : false,
                  "name" : "Routing Strategy",
                  "sensitive" : false
                },
                "LISTAGG" : {
                  "displayName" : "LISTAGG",
                  "identifiesControllerService" : false,
                  "name" : "LISTAGG",
                  "sensitive" : false
                }
              },
              "retriedRelationships" : [ ],
              "retryCount" : 10,
              "runDurationMillis" : 0,
              "scheduledState" : "ENABLED",
              "schedulingPeriod" : "0 sec",
              "schedulingStrategy" : "TIMER_DRIVEN",
              "style" : { },
              "type" : "org.apache.nifi.processors.standard.RouteOnAttribute",
              "yieldDuration" : "1 sec"
            }, {
              "autoTerminatedRelationships" : [ ],
              "backoffMechanism" : "PENALIZE_FLOWFILE",
              "bulletinLevel" : "WARN",
              "bundle" : {
                "artifact" : "commerce-search-processors-nar",
                "group" : "com.hcl.commerce",
                "version" : "9.1.16.0"
              },
              "comments" : "        SELECT AF.CATGROUP_ID, \n           AF.NAME NAME,\n           AF.LANGUAGE_ID LANGUAGE_ID,\n           AF.ATTR_ID ATTR_ID,\n           AF.IDENTIFIER IDENTIFIER,\n           AF.MAX_DISPLAY MAX_DISPLAY,\n           AF.SELECTION SELECTION,\n\t\t   AF.SEQUENCE SEQUENCE,\n           AF.FACET_ID FACET_ID,\n           AF.SORT_ORDER SORT_ORDER,\n           AF.ZERO_DISPLAY ZERO_DISPLAY,\n           AF.GROUP_ID GROUP_ID,\n           AF.KEYWORD_SEARCH KEYWORD_SEARCH,\n           AF.FACETABLE FACETABLE,\n           AF.SWATCHABLE SWATCHABLE,\n           AF.STOREDISPLAY STOREDISPLAY,\n\t\t   FCG.SEQUENCE FCG_SEQUENCE,\n\t\t   FCG.DISPLAYABLE FCG_DISPLAYABLE,\n\t\t   FCG.STOREENT_ID FCG_STOREENT_ID\n     FROM (\n     \t       SELECT I.CATGROUP_ID, I.NAME AS NAME, TO_CHAR(I.LANGUAGE_ID) LANGUAGE_ID, I.ATTR_ID  ATTR_ID, I.IDENTIFIER IDENTIFIER, F.MAX_DISPLAY  MAX_DISPLAY, F.SELECTION  SELECTION, F.FACET_ID FACET_ID, F.SORT_ORDER  SORT_ORDER, F.ZERO_DISPLAY  ZERO_DISPLAY,\n                  F.SEQUENCE SEQUENCE, (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID, F.KEYWORD_SEARCH  KEYWORD_SEARCH, I.FACETABLE FACETABLE, I.SWATCHABLE  SWATCHABLE,\n                  (CASE WHEN I.STOREDISPLAY IS NOT NULL THEN I.STOREDISPLAY ELSE 0 END) AS STOREDISPLAY\n               FROM FACET F,\n                  (SELECT DISTINCT P.CATGROUP_ID, A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, D.NAME, D.LANGUAGE_ID \n\t\t\t\t\tFROM CATGPENREL P, CATENTRYATTR C, ATTR A\n\t\t           \t\tLEFT JOIN ATTRDESC D ON D.ATTR_ID = A.ATTR_ID AND D.LANGUAGE_ID IN (${supported.language})\n\t\t\t\t\tWHERE P.CATGROUP_ID IN (${data.catgroupId}) AND C.ATTR_ID = A.ATTR_ID AND A.FACETABLE  = 1 \n                       \tAND C.CATENTRY_ID = P.CATENTRY_ID\n \t\t\t\t\tUNION\n\t\t\t\t\tSELECT DISTINCT P.CATGROUP_ID, A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, D.NAME, D.LANGUAGE_ID \n\t\t\t\t\tFROM CATGPENREL P, CATENTRYATTR C, CATENTREL CR, ATTR A\n\t\t           \t\tLEFT JOIN ATTRDESC D ON D.ATTR_ID = A.ATTR_ID AND D.LANGUAGE_ID IN (${supported.language})\n\t\t\t\t\tWHERE P.CATGROUP_ID IN (${data.catgroupId}) AND C.ATTR_ID = A.ATTR_ID AND A.FACETABLE  = 1 \n                       \tAND CR.CATENTRY_ID_CHILD = P.CATENTRY_ID  AND C.CATENTRY_ID = CR.CATENTRY_ID_PARENT AND CR.CATRELTYPE_ID IN ('PRODUCT_ITEM', 'VARIANT_ITEM', 'PRODUCT_VARIANT' )\n \t\t\t\t\tUNION\n\t\t\t\t\tSELECT DISTINCT P.CATGROUP_ID, A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, D.NAME, D.LANGUAGE_ID \n\t\t\t\t\tFROM CATGPENREL P, CATENTRYATTR C, CATENTREL CR, ATTR A\n\t\t           \t\tLEFT JOIN ATTRDESC D ON D.ATTR_ID = A.ATTR_ID AND D.LANGUAGE_ID IN (${supported.language})\n\t\t\t\t\tWHERE P.CATGROUP_ID IN (${data.catgroupId}) AND C.ATTR_ID = A.ATTR_ID AND A.FACETABLE  = 1 \n                       \tAND CR.CATENTRY_ID_PARENT = P.CATENTRY_ID AND C.CATENTRY_ID = CR.CATENTRY_ID_CHILD AND CR.CATRELTYPE_ID IN ('PRODUCT_ITEM', 'VARIANT_ITEM', 'PRODUCT_VARIANT' )                         \t\n\t\t\t\t\tUNION \n\t\t\t\t\tSELECT FCG.CATGROUP_ID, A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, ATD.NAME, ATD.LANGUAGE_ID FROM FACETCATGRP FCG\n\t\t\t\t\t\tJOIN FACET F ON F.FACET_ID = FCG.FACET_ID\n\t\t\t\t\t\tJOIN ATTR A ON A.ATTR_ID = F.ATTR_ID JOIN ATTRDESC ATD ON A.ATTR_ID  = ATD.ATTR_ID WHERE ATD.LANGUAGE_ID IN (${supported.language})) I\n                       LEFT JOIN FACETCATGRP FCG2 ON FCG2.CATGROUP_ID = I.CATGROUP_ID\n                       ${X_CUSTOM_CG_FACET_JOIN_QUERY}\n                WHERE I.ATTR_ID = F.ATTR_ID AND F.STOREENT_ID IN (${param.allStoreIds})\n\t\t   UNION \n\t\t        SELECT H.CATGROUP_ID, ('facet' || TO_CHAR(SA.SRCHATTR_ID)) NAME, ' ' AS LANGUAGE_ID, SA.SRCHATTR_ID ATTR_ID, ('facet' || TO_CHAR(SA.SRCHATTR_ID)) IDENTIFIER, F.MAX_DISPLAY MAX_DISPLAY, F.SELECTION  SELECTION, F.FACET_ID  FACET_ID, \n\t\t           F.SORT_ORDER SORT_ORDER, F.ZERO_DISPLAY  ZERO_DISPLAY, F.SEQUENCE SEQUENCE, (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID, F.KEYWORD_SEARCH  KEYWORD_SEARCH, 1 AS  FACETABLE, 0 AS  SWATCHABLE, 0 AS STOREDISPLAY\n\t\t        FROM SRCHATTR SA, FACET F, CATGROUP H\n\t\t       WHERE SA.SRCHATTR_ID = F.SRCHATTR_ID AND SA.SRCHATTR_ID IN (-1002, -1013, -1101) AND CATGROUP_ID IN (${data.catgroupId})\n\t\t  ) AF\n        LEFT JOIN FACETCATGRP FCG ON FCG.FACET_ID = AF.FACET_ID AND FCG.STOREENT_ID IN (${param.allStoreIds}) AND FCG.CATGROUP_ID = AF.CATGROUP_ID\n     ORDER BY AF.CATGROUP_ID, AF.ATTR_ID",
              "componentType" : "PROCESSOR",
              "concurrentlySchedulableTaskCount" : 1,
              "executionNode" : "ALL",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "4c28674b-9e74-372e-8309-ea05d15e07ea",
              "instanceIdentifier" : "835f3585-1faf-3bd7-2425-5b1a690d6939",
              "maxBackoffPeriod" : "10 mins",
              "name" : "Find Facets SQL",
              "penaltyDuration" : "30 sec",
              "position" : {
                "x" : -1736.0,
                "y" : 472.0
              },
              "properties" : {
                "Ingest Profile" : "${ingest.profile.name}",
                "Use Custom SQL" : "use_default_sql",
                "Profile Service" : "f85d8729-84ed-3207-8b25-ad8b515801cf",
                "SQL Location" : "sql/DatabaseCASCategoryStage1b.sql"
              },
              "propertyDescriptors" : {
                "Ingest Profile" : {
                  "displayName" : "Ingest Profile",
                  "identifiesControllerService" : false,
                  "name" : "Ingest Profile",
                  "sensitive" : false
                },
                "Use Custom SQL" : {
                  "displayName" : "Use Custom SQL",
                  "identifiesControllerService" : false,
                  "name" : "Use Custom SQL",
                  "sensitive" : false
                },
                "Profile Service" : {
                  "displayName" : "Profile Service",
                  "identifiesControllerService" : true,
                  "name" : "Profile Service",
                  "sensitive" : false
                },
                "Custom SQL" : {
                  "displayName" : "Custom SQL",
                  "identifiesControllerService" : false,
                  "name" : "Custom SQL",
                  "sensitive" : false
                },
                "SQL Location" : {
                  "displayName" : "SQL Location",
                  "identifiesControllerService" : false,
                  "name" : "SQL Location",
                  "sensitive" : false
                }
              },
              "retriedRelationships" : [ ],
              "retryCount" : 10,
              "runDurationMillis" : 0,
              "scheduledState" : "ENABLED",
              "schedulingPeriod" : "0 sec",
              "schedulingStrategy" : "TIMER_DRIVEN",
              "style" : {
                "background-color" : "#5500ff"
              },
              "type" : "com.hcl.software.data.ingest.common.processors.GenerateSQL",
              "yieldDuration" : "1 sec"
            }, {
              "autoTerminatedRelationships" : [ ],
              "backoffMechanism" : "PENALIZE_FLOWFILE",
              "bulletinLevel" : "WARN",
              "bundle" : {
                "artifact" : "commerce-search-processors-nar",
                "group" : "com.hcl.commerce",
                "version" : "9.1.16.0"
              },
              "comments" : "        SELECT AF.CATALOG_ID,\n\t\t   AF.CATGROUP_ID, \n           ${function.listagg.prefix} ${function.clob.cast.prefix} COALESCE(AF.NAME, '') ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} NAME,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.ATTR_ID ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} ATTR_ID,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.IDENTIFIER ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} IDENTIFIER,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.MAX_DISPLAY ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} MAX_DISPLAY,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.SELECTION ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} SELECTION,\n\t\t   ${function.listagg.prefix} COALESCE(FCG.SEQUENCE, AF.SEQUENCE) ${function.listagg.suffix} ${function.within.group} SEQUENCE,\n           ${function.listagg.prefix} ${function.clob.cast.prefix} AF.FACET_ID ${function.clob.cast.32k.suffix} ${function.listagg.suffix} ${function.within.group} FACET_ID,\n           ${function.listagg.prefix} AF.SORT_ORDER ${function.listagg.suffix} ${function.within.group} SORT_ORDER,\n           ${function.listagg.prefix} AF.ZERO_DISPLAY ${function.listagg.suffix} ${function.within.group} ZERO_DISPLAY,\n           ${function.listagg.prefix} AF.GROUP_ID ${function.listagg.suffix} ${function.within.group} GROUP_ID,\n           ${function.listagg.prefix} AF.KEYWORD_SEARCH ${function.listagg.suffix} ${function.within.group} KEYWORD_SEARCH,\n           ${function.listagg.prefix} AF.FACETABLE ${function.listagg.suffix} ${function.within.group} FACETABLE,\n           ${function.listagg.prefix} AF.SWATCHABLE ${function.listagg.suffix} ${function.within.group} SWATCHABLE,\n           ${function.listagg.prefix} AF.STOREDISPLAY ${function.listagg.suffix} ${function.within.group} STOREDISPLAY,\n\t\t   ${function.listagg.prefix} COALESCE(FCG.DISPLAYABLE, 1) ${function.listagg.suffix} ${function.within.group} DISPLAYABLE\n     FROM (SELECT I.CATALOG_ID, I.CATGROUP_ID,\n           A.NAME AS NAME,\n           A.ATTR_ID  ATTR_ID,\n           A.IDENTIFIER  IDENTIFIER,\n           F.MAX_DISPLAY  MAX_DISPLAY,\n           F.SELECTION  SELECTION,\n           F.FACET_ID  FACET_ID,\n           F.SORT_ORDER  SORT_ORDER,\n           F.ZERO_DISPLAY  ZERO_DISPLAY,\n           F.SEQUENCE SEQUENCE,\n           (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n           F.KEYWORD_SEARCH  KEYWORD_SEARCH,\n           A.FACETABLE  FACETABLE,\n           A.SWATCHABLE  SWATCHABLE,\n           (CASE WHEN A.STOREDISPLAY IS NOT NULL THEN A.STOREDISPLAY ELSE 0 END) AS STOREDISPLAY\n      FROM (SELECT A.ATTR_ID, A.IDENTIFIER, A.FACETABLE, A.SWATCHABLE, A.STOREDISPLAY, A.STOREENT_ID, COALESCE(D.NAME, DF.NAME) NAME\n              FROM ATTR A\n                   LEFT JOIN ATTRDESC D ON D.ATTR_ID = A.ATTR_ID AND D.LANGUAGE_ID = ${param.langId}\n                   LEFT OUTER JOIN ATTRDESC DF ON DF.ATTR_ID = A.ATTR_ID AND DF.LANGUAGE_ID = ${default.language}) A,\n                   FACET F,\n                   (SELECT DISTINCT P.CATALOG_ID, P.CATGROUP_ID, C.ATTR_ID, H.CATGROUP_ID_PARENT\n                      FROM CATGPENREL P, CATENTRYATTR C,\n                           (SELECT G.CATGROUP_ID, R.CATALOG_ID, R.CATGROUP_ID_PARENT\n                              FROM CATGRPREL R, CATGROUP G\n                             WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID_CHILD = G.CATGROUP_ID AND G.MARKFORDELETE = 0\n                            UNION\n                           SELECT G.CATGROUP_ID, R.CATALOG_ID, ${function.long.null}\n                             FROM CATTOGRP R, CATGROUP G\n                            WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID = G.CATGROUP_ID AND G.MARKFORDELETE = 0) H\n                      WHERE P.CATALOG_ID = H.CATALOG_ID AND P.CATGROUP_ID = H.CATGROUP_ID\n                        AND P.CATENTRY_ID = C.CATENTRY_ID ${extCatgroupAndSQL1a}) I\n            LEFT JOIN FACETCATGRP FCG2 ON  FCG2.CATGROUP_ID = I.CATGROUP_ID\n\t\t    ${TI_DELTA_CG_FACET_JOIN_QUERY}\n            ${X_CUSTOM_CG_FACET_JOIN_QUERY}\n     WHERE I.ATTR_ID = A.ATTR_ID AND A.ATTR_ID = F.ATTR_ID AND A.FACETABLE = 1\n       AND F.STOREENT_ID IN\n           (SELECT RELATEDSTORE_ID FROM STOREREL WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId})\n\t\t UNION \n\t\t   SELECT ${param.catalogId} AS CATALOG_ID,\n           C.CATGROUP_ID, \n\t\t   ('facet' || TO_CHAR(SA.SRCHATTR_ID)) NAME,\n\t\t   SA.SRCHATTR_ID ATTR_ID,\n\t\t   ('facet' || TO_CHAR(SA.SRCHATTR_ID)) IDENTIFIER,\n           F.MAX_DISPLAY MAX_DISPLAY,\n\t\t   F.SELECTION  SELECTION,\n           F.FACET_ID  FACET_ID,\n           F.SORT_ORDER  SORT_ORDER,\n           F.ZERO_DISPLAY  ZERO_DISPLAY,\n           F.SEQUENCE SEQUENCE,\n           (CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n           F.KEYWORD_SEARCH  KEYWORD_SEARCH,\n           1 AS  FACETABLE,\n           0 AS  SWATCHABLE,\n\t\t   0 AS STOREDISPLAY\n\t\t   FROM SRCHATTR SA,  FACET F,  (SELECT G.CATGROUP_ID, R.CATALOG_ID\n                              FROM CATGRPREL R, CATGROUP G\n                             WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID_CHILD = G.CATGROUP_ID AND G.MARKFORDELETE = 0\n                            UNION\n                           SELECT G.CATGROUP_ID, R.CATALOG_ID\n                             FROM CATTOGRP R, CATGROUP G\n                            WHERE R.CATALOG_ID = ${param.catalogId}\n                              AND R.CATALOG_ID IN\n                                  (SELECT CATALOG_ID\n                                     FROM STORECAT\n                                    WHERE STOREENT_ID IN\n                                          (SELECT RELATEDSTORE_ID FROM STOREREL\n                                            WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId}))\n                              AND R.CATGROUP_ID = G.CATGROUP_ID AND G.MARKFORDELETE = 0) H,\n                              CATGROUP C\n\t\t   ${TI_DELTA_CG_JOIN_QUERY}\n           ${X_CUSTOM_CG_JOIN_QUERY}\n\t\t    WHERE SA.SRCHATTR_ID = F.SRCHATTR_ID AND SA.SRCHATTR_ID IN (-1002, -1013, -1101) AND H.CATALOG_ID = ${param.catalogId} \n\t\t       AND C.CATGROUP_ID = H.CATGROUP_ID\n\t\t  ${extCatgroupAndSQL} \n\t\t  UNION\n\t\t  SELECT \n\t\t${param.catalogId} AS CATALOG_ID, \n\t\tFCG3.CATGROUP_ID,\n\t\tATD.NAME AS NAME,\n\t\tA.ATTR_ID AS ATTR_ID,\n\t\tA.IDENTIFIER AS IDENTIFIER,\n\t\tF.MAX_DISPLAY AS MAX_DISPLAY,\n\t\tF.SELECTION AS SELECTION,\n\t\tF.FACET_ID AS FACET_ID, \n\t\tF.SORT_ORDER AS SORT_ORDER,\n\t\tF.ZERO_DISPLAY AS ZERO_DISPLAY,\n\t\tCOALESCE(FCG3.SEQUENCE, A.SEQUENCE) AS SEQUENCE,\n\t\t(CASE WHEN F.GROUP_ID IS NOT NULL THEN F.GROUP_ID ELSE 0 END) AS GROUP_ID,\n\t\tF.KEYWORD_SEARCH AS KEYWORD_SEARCH,\n\t\tA.FACETABLE AS FACETABLE,\n\t\tA.SWATCHABLE AS SWATCHABLE,\n\t\t(CASE WHEN A.STOREDISPLAY IS NOT NULL THEN A.STOREDISPLAY ELSE 0 END) AS  STOREDISPLAY\n\t\tFROM FACETCATGRP FCG3 JOIN FACET F ON F.FACET_ID = FCG3.FACET_ID\n\t\tJOIN ATTR A ON A.ATTR_ID = F.ATTR_ID \n\t\tJOIN ATTRDESC ATD ON A.ATTR_ID  = ATD.ATTR_ID \n\t\tWHERE \n\t\tATD.LANGUAGE_ID = ${param.langId} AND 'true' = (SELECT LOWER(D.CONTENT) FROM EMSPOT E, DMEMSPOTDEF D, STOREREL R WHERE \n\t\tR.RELATEDSTORE_ID = E.STOREENT_ID AND R.STATE = 1 AND R.STRELTYP_ID = -11 AND R.STORE_ID = ${param.storeId} AND \n\t\tR.STORE_ID= D.STOREENT_ID AND E.USAGETYPE = 'STOREFEATURE' AND E.EMSPOT_ID = D.EMSPOT_ID AND D.CONTENTTYPE = 'FeatureEnabled' AND E.NAME= 'ExpandedCategoryNavigation')\n\t\tAND FCG3.STOREENT_ID IN (SELECT RELATEDSTORE_ID FROM STOREREL WHERE STATE = 1 AND STRELTYP_ID = -4 AND STORE_ID = ${param.storeId})) AF\n        LEFT JOIN FACETCATGRP FCG ON FCG.FACET_ID = AF.FACET_ID AND FCG.STOREENT_ID = ${param.storeId} AND FCG.CATGROUP_ID = AF.CATGROUP_ID\n     ${function.group}\n     ORDER BY AF.CATALOG_ID, AF.CATGROUP_ID",
              "componentType" : "PROCESSOR",
              "concurrentlySchedulableTaskCount" : 1,
              "executionNode" : "ALL",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "1195761e-3951-3a91-a4d3-f012e3bbe9ab",
              "instanceIdentifier" : "6774cc91-c653-3273-4f96-0b88b5ccf52c",
              "maxBackoffPeriod" : "10 mins",
              "name" : "Find Facets SQL - LISTAGG",
              "penaltyDuration" : "30 sec",
              "position" : {
                "x" : -1736.0,
                "y" : 144.0
              },
              "properties" : {
                "Ingest Profile" : "${ingest.profile.name}",
                "Use Custom SQL" : "use_default_sql",
                "Profile Service" : "f85d8729-84ed-3207-8b25-ad8b515801cf",
                "SQL Location" : "sql/DatabaseCASCategoryStage1b-listagg.sql"
              },
              "propertyDescriptors" : {
                "Ingest Profile" : {
                  "displayName" : "Ingest Profile",
                  "identifiesControllerService" : false,
                  "name" : "Ingest Profile",
                  "sensitive" : false
                },
                "Use Custom SQL" : {
                  "displayName" : "Use Custom SQL",
                  "identifiesControllerService" : false,
                  "name" : "Use Custom SQL",
                  "sensitive" : false
                },
                "Profile Service" : {
                  "displayName" : "Profile Service",
                  "identifiesControllerService" : true,
                  "name" : "Profile Service",
                  "sensitive" : false
                },
                "Custom SQL" : {
                  "displayName" : "Custom SQL",
                  "identifiesControllerService" : false,
                  "name" : "Custom SQL",
                  "sensitive" : false
                },
                "SQL Location" : {
                  "displayName" : "SQL Location",
                  "identifiesControllerService" : false,
                  "name" : "SQL Location",
                  "sensitive" : false
                }
              },
              "retriedRelationships" : [ ],
              "retryCount" : 10,
              "runDurationMillis" : 0,
              "scheduledState" : "ENABLED",
              "schedulingPeriod" : "0 sec",
              "schedulingStrategy" : "TIMER_DRIVEN",
              "style" : {
                "background-color" : "#5500ff"
              },
              "type" : "com.hcl.software.data.ingest.common.processors.GenerateSQL",
              "yieldDuration" : "1 sec"
            }, {
              "autoTerminatedRelationships" : [ ],
              "backoffMechanism" : "PENALIZE_FLOWFILE",
              "bulletinLevel" : "WARN",
              "bundle" : {
                "artifact" : "commerce-search-processors-nar",
                "group" : "com.hcl.commerce",
                "version" : "9.1.16.0"
              },
              "comments" : "",
              "componentType" : "PROCESSOR",
              "concurrentlySchedulableTaskCount" : 2,
              "executionNode" : "ALL",
              "groupIdentifier" : "2f30ae20-0736-316b-b2a4-67d2ff1a1fa1",
              "identifier" : "f2d28682-6418-3a3b-bbd9-ce2a190cb561",
              "instanceIdentifier" : "59ff73fe-91f3-3b8f-5892-4494c73bc67e",
              "maxBackoffPeriod" : "10 mins",
              "name" : "Transform Document - Find Facets For Category From Database",
              "penaltyDuration" : "0 sec",
              "position" : {
                "x" : -760.0,
                "y" : 280.0
              },
              "properties" : {
                "sql-pre-query" : "${ingest.database.schema.sql}",
                "SQL select query" : "${ingest.database.sql}",
                "Database Connection Pooling Service" : "73700914-fc73-39a7-a3aa-1eae9a03b1b6"
              },
              "propertyDescriptors" : {
                "sql-pre-query" : {
                  "displayName" : "SQL Pre-Query",
                  "identifiesControllerService" : false,
                  "name" : "sql-pre-query",
                  "sensitive" : false
                },
                "SQL select query" : {
                  "displayName" : "SQL select query",
                  "identifiesControllerService" : false,
                  "name" : "SQL select query",
                  "sensitive" : false
                },
                "Database Connection Pooling Service" : {
                  "displayName" : "Database Connection Pooling Service",
                  "identifiesControllerService" : true,
                  "name" : "Database Connection Pooling Service",
                  "sensitive" : false
                }
              },
              "retriedRelationships" : [ ],
              "retryCount" : 10,
              "runDurationMillis" : 0,
              "scheduledState" : "ENABLED",
              "schedulingPeriod" : "0 sec",
              "schedulingStrategy" : "TIMER_DRIVEN",
              "style" : {
                "background-color" : "#0000ff"
              },
              "type" : "com.hcl.software.data.ingest.category.processors.FindFacetsForCategoryByAssetStoreFromDatabase",
              "yieldDuration" : "1 sec"
            } ],
            "remoteProcessGroups" : [ ],
            "variables" : { }
          }, {
            "comments" : "",
            "componentType" : "PROCESS_GROUP",
            "connections" : [ {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "a92e92e9-273e-3a03-a5e0-b63e9d3ed0c2",
                "instanceIdentifier" : "494b0919-e971-3384-cdef-ddbc5622a3fa",
                "name" : "OUTPUT",
                "type" : "OUTPUT_PORT"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "69efb971-1d97-3ed5-b6d1-56fd31b314bf",
              "instanceIdentifier" : "88e6d576-e985-301d-d0ad-b0f0cf816628",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "route" ],
              "source" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "45cfdec3-5150-3b0d-bc2b-f85c3a0925cc",
                "instanceIdentifier" : "32253fe5-2395-3d95-3c90-bf1265624283",
                "name" : "Route to skip",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "44026530-0be0-3360-a21b-6db3e4c3388e",
                "instanceIdentifier" : "e2cc52fb-50fb-39e9-ca29-aa4cdf45806d",
                "name" : "Set stage.name and stage.start.time",
                "type" : "PROCESSOR"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "4bb8acc3-dae6-3d79-b492-addf1bad81e7",
              "instanceIdentifier" : "a9c6d209-cb1d-3a77-f502-6594bb4e8528",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "route" ],
              "source" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "748b145e-94a1-3257-9d6f-c1a01dcf975f",
                "instanceIdentifier" : "620198af-8603-3475-8085-2eb1b30fcd35",
                "name" : "Route to side flow",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "45cfdec3-5150-3b0d-bc2b-f85c3a0925cc",
                "instanceIdentifier" : "32253fe5-2395-3d95-3c90-bf1265624283",
                "name" : "Route to skip",
                "type" : "PROCESSOR"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "7ffc3004-fa8e-3cca-abf9-00e15da5a0f8",
              "instanceIdentifier" : "e8968f4c-e08b-315b-e6e2-5c23bb52b9ad",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "success" ],
              "source" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "44026530-0be0-3360-a21b-6db3e4c3388e",
                "instanceIdentifier" : "e2cc52fb-50fb-39e9-ca29-aa4cdf45806d",
                "name" : "Set stage.name and stage.start.time",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "748b145e-94a1-3257-9d6f-c1a01dcf975f",
                "instanceIdentifier" : "620198af-8603-3475-8085-2eb1b30fcd35",
                "name" : "Route to side flow",
                "type" : "PROCESSOR"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "236d3fe1-baa3-3c6a-bf20-27e0623eda84",
              "instanceIdentifier" : "15ddec51-b01e-3eb0-6e9d-23e022fcbc96",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "" ],
              "source" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "4d924c33-7371-35c0-ab9f-469a1d7bd52d",
                "instanceIdentifier" : "d25755a8-146e-3543-3b80-c1543883b487",
                "name" : "INPUT",
                "type" : "INPUT_PORT"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "0e23c7f7-da58-3337-b866-6fe7a33be487",
                "instanceIdentifier" : "c34a1074-a5bf-3c1b-28bd-47b6d1265cdb",
                "name" : "Prepare SKIP event",
                "type" : "PROCESSOR"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "67772847-88e0-3b62-94cd-41d7724803f8",
              "instanceIdentifier" : "5d2108e5-1f85-3574-ad10-bb06344de1bf",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "unmatched" ],
              "source" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "45cfdec3-5150-3b0d-bc2b-f85c3a0925cc",
                "instanceIdentifier" : "32253fe5-2395-3d95-3c90-bf1265624283",
                "name" : "Route to skip",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "a9da508c-c399-3bcb-93c4-7b4c4d97023a",
                "instanceIdentifier" : "4a0cc3c8-970c-3183-30bd-d7c9289fd830",
                "name" : "SKIP",
                "type" : "OUTPUT_PORT"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "fdf2f818-e991-304e-a1d7-f42d45406cfe",
              "instanceIdentifier" : "57f176c9-1daf-382f-8bc1-a4aa5f369240",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "success" ],
              "source" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "0e23c7f7-da58-3337-b866-6fe7a33be487",
                "instanceIdentifier" : "c34a1074-a5bf-3c1b-28bd-47b6d1265cdb",
                "name" : "Prepare SKIP event",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            }, {
              "backPressureDataSizeThreshold" : "1 GB",
              "backPressureObjectThreshold" : 10000,
              "bends" : [ ],
              "componentType" : "CONNECTION",
              "destination" : {
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "3450fa48-474f-351f-8d31-c2ae097426f2",
                "instanceIdentifier" : "fcb8d11d-ae44-38f2-2b92-fc4a0784b30b",
                "name" : "NEXT",
                "type" : "OUTPUT_PORT"
              },
              "flowFileExpiration" : "0 sec",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "55eebcd6-2335-3aee-b2eb-0a1b78fe9685",
              "instanceIdentifier" : "13e76337-3ccc-33fe-7197-e2edaaa29d89",
              "labelIndex" : 1,
              "loadBalanceCompression" : "DO_NOT_COMPRESS",
              "loadBalanceStrategy" : "DO_NOT_LOAD_BALANCE",
              "name" : "",
              "partitioningAttribute" : "",
              "prioritizers" : [ ],
              "selectedRelationships" : [ "unmatched" ],
              "source" : {
                "comments" : "",
                "groupId" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
                "id" : "748b145e-94a1-3257-9d6f-c1a01dcf975f",
                "instanceIdentifier" : "620198af-8603-3475-8085-2eb1b30fcd35",
                "name" : "Route to side flow",
                "type" : "PROCESSOR"
              },
              "zIndex" : 0
            } ],
            "controllerServices" : [ ],
            "defaultBackPressureDataSizeThreshold" : "1 GB",
            "defaultBackPressureObjectThreshold" : 10000,
            "defaultFlowFileExpiration" : "0 sec",
            "flowFileConcurrency" : "UNBOUNDED",
            "flowFileOutboundPolicy" : "STREAM_WHEN_AVAILABLE",
            "funnels" : [ ],
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
            "inputPorts" : [ {
              "allowRemoteAccess" : false,
              "comments" : "",
              "componentType" : "INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "4d924c33-7371-35c0-ab9f-469a1d7bd52d",
              "instanceIdentifier" : "d25755a8-146e-3543-3b80-c1543883b487",
              "name" : "INPUT",
              "position" : {
                "x" : -1024.0,
                "y" : -328.0
              },
              "scheduledState" : "ENABLED",
              "type" : "INPUT_PORT"
            } ],
            "instanceIdentifier" : "41c89b0b-5b3e-33b7-ed1b-c993b511324a",
            "labels" : [ {
              "componentType" : "LABEL",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "height" : 536.0,
              "identifier" : "74db2809-d92e-3acc-ac5a-61e4390a972f",
              "instanceIdentifier" : "de37be30-793c-3e72-8c61-70b77517d781",
              "label" : "Route To Side Flow",
              "position" : {
                "x" : -920.0,
                "y" : -464.0
              },
              "style" : {
                "background-color" : "#d4ffe7",
                "font-size" : "24px"
              },
              "width" : 1952.0,
              "zIndex" : 0
            } ],
            "name" : "Route To Side Flow",
            "outputPorts" : [ {
              "allowRemoteAccess" : false,
              "componentType" : "OUTPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "3450fa48-474f-351f-8d31-c2ae097426f2",
              "instanceIdentifier" : "fcb8d11d-ae44-38f2-2b92-fc4a0784b30b",
              "name" : "NEXT",
              "position" : {
                "x" : -408.0,
                "y" : -496.0
              },
              "scheduledState" : "ENABLED",
              "type" : "OUTPUT_PORT"
            }, {
              "allowRemoteAccess" : false,
              "componentType" : "OUTPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "a9da508c-c399-3bcb-93c4-7b4c4d97023a",
              "instanceIdentifier" : "4a0cc3c8-970c-3183-30bd-d7c9289fd830",
              "name" : "SKIP",
              "position" : {
                "x" : 896.0,
                "y" : -328.0
              },
              "scheduledState" : "ENABLED",
              "type" : "OUTPUT_PORT"
            }, {
              "allowRemoteAccess" : false,
              "comments" : "",
              "componentType" : "OUTPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "a92e92e9-273e-3a03-a5e0-b63e9d3ed0c2",
              "instanceIdentifier" : "494b0919-e971-3384-cdef-ddbc5622a3fa",
              "name" : "OUTPUT",
              "position" : {
                "x" : 896.0,
                "y" : -104.0
              },
              "scheduledState" : "ENABLED",
              "type" : "OUTPUT_PORT"
            } ],
            "position" : {
              "x" : 3232.0,
              "y" : 336.0
            },
            "processGroups" : [ ],
            "processors" : [ {
              "autoTerminatedRelationships" : [ ],
              "backoffMechanism" : "PENALIZE_FLOWFILE",
              "bulletinLevel" : "NONE",
              "bundle" : {
                "artifact" : "nifi-update-attribute-nar",
                "group" : "org.apache.nifi",
                "version" : "1.22.0"
              },
              "comments" : "",
              "componentType" : "PROCESSOR",
              "concurrentlySchedulableTaskCount" : 1,
              "executionNode" : "ALL",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "44026530-0be0-3360-a21b-6db3e4c3388e",
              "instanceIdentifier" : "e2cc52fb-50fb-39e9-ca29-aa4cdf45806d",
              "maxBackoffPeriod" : "10 mins",
              "name" : "Set stage.name and stage.start.time",
              "penaltyDuration" : "0 sec",
              "position" : {
                "x" : -464.0,
                "y" : -144.0
              },
              "properties" : {
                "stage.start.time" : "${now():toNumber()}",
                "stage.name" : "Category Stage 1b (Facets), Find Facets for Category",
                "Store State" : "Do not store state",
                "canonical-value-lookup-cache-size" : "100",
                "flow.name" : "${pipe.name}"
              },
              "propertyDescriptors" : {
                "stage.start.time" : {
                  "displayName" : "stage.start.time",
                  "identifiesControllerService" : false,
                  "name" : "stage.start.time",
                  "sensitive" : false
                },
                "stage.name" : {
                  "displayName" : "stage.name",
                  "identifiesControllerService" : false,
                  "name" : "stage.name",
                  "sensitive" : false
                },
                "Delete Attributes Expression" : {
                  "displayName" : "Delete Attributes Expression",
                  "identifiesControllerService" : false,
                  "name" : "Delete Attributes Expression",
                  "sensitive" : false
                },
                "Store State" : {
                  "displayName" : "Store State",
                  "identifiesControllerService" : false,
                  "name" : "Store State",
                  "sensitive" : false
                },
                "canonical-value-lookup-cache-size" : {
                  "displayName" : "Cache Value Lookup Cache Size",
                  "identifiesControllerService" : false,
                  "name" : "canonical-value-lookup-cache-size",
                  "sensitive" : false
                },
                "flow.name" : {
                  "displayName" : "flow.name",
                  "identifiesControllerService" : false,
                  "name" : "flow.name",
                  "sensitive" : false
                },
                "Stateful Variables Initial Value" : {
                  "displayName" : "Stateful Variables Initial Value",
                  "identifiesControllerService" : false,
                  "name" : "Stateful Variables Initial Value",
                  "sensitive" : false
                }
              },
              "retriedRelationships" : [ ],
              "retryCount" : 10,
              "runDurationMillis" : 0,
              "scheduledState" : "ENABLED",
              "schedulingPeriod" : "0 sec",
              "schedulingStrategy" : "TIMER_DRIVEN",
              "style" : { },
              "type" : "org.apache.nifi.processors.attributes.UpdateAttribute",
              "yieldDuration" : "1 sec"
            }, {
              "autoTerminatedRelationships" : [ ],
              "backoffMechanism" : "PENALIZE_FLOWFILE",
              "bulletinLevel" : "WARN",
              "bundle" : {
                "artifact" : "nifi-standard-nar",
                "group" : "org.apache.nifi",
                "version" : "1.22.0"
              },
              "comments" : "",
              "componentType" : "PROCESSOR",
              "concurrentlySchedulableTaskCount" : 1,
              "executionNode" : "ALL",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "748b145e-94a1-3257-9d6f-c1a01dcf975f",
              "instanceIdentifier" : "620198af-8603-3475-8085-2eb1b30fcd35",
              "maxBackoffPeriod" : "10 mins",
              "name" : "Route to side flow",
              "penaltyDuration" : "30 sec",
              "position" : {
                "x" : -464.0,
                "y" : -368.0
              },
              "properties" : {
                "Routing Strategy" : "Route to Property name",
                "route" : "${data.catgroupId:isEmpty():not()}"
              },
              "propertyDescriptors" : {
                "Routing Strategy" : {
                  "displayName" : "Routing Strategy",
                  "identifiesControllerService" : false,
                  "name" : "Routing Strategy",
                  "sensitive" : false
                },
                "route" : {
                  "displayName" : "route",
                  "identifiesControllerService" : false,
                  "name" : "route",
                  "sensitive" : false
                }
              },
              "retriedRelationships" : [ ],
              "retryCount" : 10,
              "runDurationMillis" : 0,
              "scheduledState" : "ENABLED",
              "schedulingPeriod" : "0 sec",
              "schedulingStrategy" : "TIMER_DRIVEN",
              "style" : { },
              "type" : "org.apache.nifi.processors.standard.RouteOnAttribute",
              "yieldDuration" : "1 sec"
            }, {
              "autoTerminatedRelationships" : [ ],
              "backoffMechanism" : "PENALIZE_FLOWFILE",
              "bulletinLevel" : "WARN",
              "bundle" : {
                "artifact" : "nifi-update-attribute-nar",
                "group" : "org.apache.nifi",
                "version" : "1.22.0"
              },
              "comments" : "",
              "componentType" : "PROCESSOR",
              "concurrentlySchedulableTaskCount" : 1,
              "executionNode" : "ALL",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "0e23c7f7-da58-3337-b866-6fe7a33be487",
              "instanceIdentifier" : "c34a1074-a5bf-3c1b-28bd-47b6d1265cdb",
              "maxBackoffPeriod" : "10 mins",
              "name" : "Prepare SKIP event",
              "penaltyDuration" : "0 sec",
              "position" : {
                "x" : 216.0,
                "y" : -368.0
              },
              "properties" : {
                "Store State" : "Do not store state",
                "canonical-value-lookup-cache-size" : "100",
                "terminal.method" : "wait",
                "wait.id" : "${connector.name}-${flow.name}-${param.storeId}-${param.langId}-${param.catalogId}-${run.id}"
              },
              "propertyDescriptors" : {
                "Delete Attributes Expression" : {
                  "displayName" : "Delete Attributes Expression",
                  "identifiesControllerService" : false,
                  "name" : "Delete Attributes Expression",
                  "sensitive" : false
                },
                "Store State" : {
                  "displayName" : "Store State",
                  "identifiesControllerService" : false,
                  "name" : "Store State",
                  "sensitive" : false
                },
                "canonical-value-lookup-cache-size" : {
                  "displayName" : "Cache Value Lookup Cache Size",
                  "identifiesControllerService" : false,
                  "name" : "canonical-value-lookup-cache-size",
                  "sensitive" : false
                },
                "terminal.method" : {
                  "displayName" : "terminal.method",
                  "identifiesControllerService" : false,
                  "name" : "terminal.method",
                  "sensitive" : false
                },
                "Stateful Variables Initial Value" : {
                  "displayName" : "Stateful Variables Initial Value",
                  "identifiesControllerService" : false,
                  "name" : "Stateful Variables Initial Value",
                  "sensitive" : false
                },
                "wait.id" : {
                  "displayName" : "wait.id",
                  "identifiesControllerService" : false,
                  "name" : "wait.id",
                  "sensitive" : false
                }
              },
              "retriedRelationships" : [ ],
              "retryCount" : 10,
              "runDurationMillis" : 0,
              "scheduledState" : "ENABLED",
              "schedulingPeriod" : "0 sec",
              "schedulingStrategy" : "TIMER_DRIVEN",
              "style" : { },
              "type" : "org.apache.nifi.processors.attributes.UpdateAttribute",
              "yieldDuration" : "1 sec"
            }, {
              "autoTerminatedRelationships" : [ ],
              "backoffMechanism" : "PENALIZE_FLOWFILE",
              "bulletinLevel" : "NONE",
              "bundle" : {
                "artifact" : "nifi-standard-nar",
                "group" : "org.apache.nifi",
                "version" : "1.22.0"
              },
              "comments" : "",
              "componentType" : "PROCESSOR",
              "concurrentlySchedulableTaskCount" : 1,
              "executionNode" : "ALL",
              "groupIdentifier" : "380ef263-e751-3770-aaa4-3e9da0ed1697",
              "identifier" : "45cfdec3-5150-3b0d-bc2b-f85c3a0925cc",
              "instanceIdentifier" : "32253fe5-2395-3d95-3c90-bf1265624283",
              "maxBackoffPeriod" : "10 mins",
              "name" : "Route to skip",
              "penaltyDuration" : "0 sec",
              "position" : {
                "x" : 216.0,
                "y" : -144.0
              },
              "properties" : {
                "Routing Strategy" : "Route to Property name",
                "route" : "${updateCategoryFacet:equalsIgnoreCase('true'):or(${flow.NRT:equalsIgnoreCase('true'):not()}):or(${connector.name:startsWith('dataload')}):or(${param.workspace:equalsIgnoreCase('IBM_WC_BASE'):not()}):or(${param.changeHistoryId:equalsIgnoreCase('00000')})}"
              },
              "propertyDescriptors" : {
                "Routing Strategy" : {
                  "displayName" : "Routing Strategy",
                  "identifiesControllerService" : false,
                  "name" : "Routing Strategy",
                  "sensitive" : false
                },
                "route" : {
                  "displayName" : "route",
                  "identifiesControllerService" : false,
                  "name" : "route",
                  "sensitive" : false
                }
              },
              "retriedRelationships" : [ ],
              "retryCount" : 10,
              "runDurationMillis" : 0,
              "scheduledState" : "ENABLED",
              "schedulingPeriod" : "0 sec",
              "schedulingStrategy" : "TIMER_DRIVEN",
              "style" : { },
              "type" : "org.apache.nifi.processors.standard.RouteOnAttribute",
              "yieldDuration" : "1 sec"
            } ],
            "remoteProcessGroups" : [ ],
            "variables" : { }
          } ],
          "processors" : [ ],
          "remoteProcessGroups" : [ {
            "comments" : "",
            "communicationsTimeout" : "1800 sec",
            "componentType" : "REMOTE_PROCESS_GROUP",
            "groupIdentifier" : "0d5c1498-c159-3b79-aa7c-f149ac6d3474",
            "identifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
            "inputPorts" : [ {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "41adf11e-8388-3eaa-a0a7-2eb249ad353f",
              "instanceIdentifier" : "7e0b1dcc-2ab2-39e6-3bd6-9fd57fceee54",
              "name" : "Bulk Description INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4ae88-018a-1000-fdd2-7f92083a1194",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "14f53261-841d-35a8-8da4-e2f81ef22364",
              "instanceIdentifier" : "74172463-b83b-3eb5-6e55-564d7e52c404",
              "name" : "Bulk Inventory INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4af97-018a-1000-51b9-a89728e5f2f5",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "comments" : "",
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "467b212e-7546-3f47-9551-dac33f1fea40",
              "instanceIdentifier" : "a75e2b26-f05f-331b-51d6-9543b6072166",
              "name" : "Routing INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "e17f6444-3303-35c3-c9fd-6a1982893a74",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "5deac684-077d-319f-ade0-68c7a7883f6a",
              "instanceIdentifier" : "f9368fa6-fbba-3e41-13a7-92454d8dfe22",
              "name" : "Bulk Catalog INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4ac66-018a-1000-7484-ab8880cab64c",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "5a2ca183-1ec3-3691-b63d-28868e591b50",
              "instanceIdentifier" : "58ec2f97-c1e5-3e7a-9987-1cb0989b2201",
              "name" : "Run INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4aa78-018a-1000-256f-666bd5cd26e5",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "cd819a43-70da-3187-ae83-c341fa887d86",
              "instanceIdentifier" : "b77b0c0f-f30d-3d25-e85b-dcbf5332634c",
              "name" : "Bulk Price INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4af24-018a-1000-480b-94776a7313f2",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "1ad48f2d-bb6b-3556-9324-b7ac549ef728",
              "instanceIdentifier" : "792da027-d7c8-309e-43c2-9701ffa7790a",
              "name" : "Logger INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4a99c-018a-1000-817b-c0cc66e12450",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "0d6e27a2-1bf8-317a-be08-f341a8b8430d",
              "instanceIdentifier" : "8b5a3fbf-ecf6-3aa0-10d0-2cfc0a5614e7",
              "name" : "Bulk Category INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4ad51-018a-1000-16d2-58824656fab3",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "c9ad0fe8-553b-361b-86b0-c988eba85532",
              "instanceIdentifier" : "8cbb5ce9-a1e5-372a-792b-9c48e2d4f25c",
              "name" : "Bulk Product INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4add8-018a-1000-d61b-88152482c441",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "fcd52576-ece9-3b2e-986a-a7ee26263f74",
              "instanceIdentifier" : "44e43419-6d98-3035-8582-c013549a86a9",
              "name" : "Terminal INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4ab1d-018a-1000-6661-0f01fdac30c5",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "d1dbc803-185c-3992-8f7e-d3981e2a7bd0",
              "instanceIdentifier" : "3e9461b2-ea52-31f5-f28c-007e68282bc3",
              "name" : "Bulk Attribute INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4acd6-018a-1000-cb5e-4310537f93f3",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "309fa69d-95ed-388e-b73b-6889a6f40670",
              "instanceIdentifier" : "971416e5-086e-35bb-f6bf-7626096204fa",
              "name" : "Bulk Dataload INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4b072-018a-1000-5279-79886dc962a1",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "3ecc6ac8-d34c-357c-bbbb-7246ae4d220c",
              "instanceIdentifier" : "f8f7ae2a-1b52-3535-5915-808d592e8008",
              "name" : "Bulk Store INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4abe6-018a-1000-1d29-41b431c683ba",
              "useCompression" : false
            }, {
              "batchSize" : { },
              "componentType" : "REMOTE_INPUT_PORT",
              "concurrentlySchedulableTaskCount" : 1,
              "groupIdentifier" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "identifier" : "42da9d9f-4b58-36e4-ae0c-d0ecd18f272c",
              "instanceIdentifier" : "a34c5844-0140-390d-4685-96c0b39c42bb",
              "name" : "Bulk URL INPUT",
              "remoteGroupId" : "3a0fc200-da7c-3169-9812-655e91b38616",
              "scheduledState" : "ENABLED",
              "targetId" : "b6b4b009-018a-1000-63d8-5ec590f445e2",
              "useCompression" : false
            } ],
            "instanceIdentifier" : "32cf0512-3cd0-3b2d-522d-135d981fa080",
            "name" : "NiFi Flow",
            "outputPorts" : [ ],
            "position" : {
              "x" : 2544.0,
              "y" : 24.0
            },
            "proxyHost" : "",
            "proxyUser" : "",
            "targetUri" : "http://localhost:30600/nifi",
            "targetUris" : "http://localhost:30600/nifi",
            "transportProtocol" : "RAW",
            "yieldDuration" : "10 sec"
          } ],
          "variables" : {
            "scroll.bucket.size" : "200",
            "scroll.refresh.index" : "false"
          }
        } ],
        "processors" : [ ],
        "remoteProcessGroups" : [ ],
        "variables" : {
          "pipe.name" : "",
          "connector.name" : ""
        }
      },
      "flowEncodingVersion" : "1.0",
      "parameterContexts" : {
        "AUTH_JDBC_CONTEXT" : {
          "componentType" : "PARAMETER_CONTEXT",
          "inheritedParameterContexts" : [ ],
          "name" : "AUTH_JDBC_CONTEXT",
          "parameters" : [ {
            "description" : "JDBC URL",
            "name" : "JDBC_URL",
            "provided" : false,
            "sensitive" : false,
            "value" : "${AUTH_JDBC_URL}"
          }, {
            "description" : "JDBC USER PASSWORD",
            "name" : "JDBC_USER_PASSWORD",
            "provided" : false,
            "sensitive" : true
          }, {
            "description" : "JDBC DRIVER LOCATION",
            "name" : "JDBC_DRIVER_LOCATION",
            "provided" : false,
            "sensitive" : false,
            "value" : "${AUTH_JDBC_DRIVER_LOCATION}"
          }, {
            "description" : "JDBC DRIVER CLASSNAME",
            "name" : "JDBC_DRIVER_CLASSNAME",
            "provided" : false,
            "sensitive" : false,
            "value" : "${AUTH_JDBC_DRIVER_CLASSNAME}"
          }, {
            "description" : "JDBC USER NAME",
            "name" : "JDBC_USER_NAME",
            "provided" : false,
            "sensitive" : false,
            "value" : "${AUTH_JDBC_USER_NAME}"
          } ]
        }
      },
      "parameterProviders" : { }
    }
  }
}